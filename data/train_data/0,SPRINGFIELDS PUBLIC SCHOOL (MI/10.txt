[

    ', 
    ', 
    ', 
    ', 

    ', 
    ', 
    ', 

    ', 
    ', 
        ', Skip to Main Content', 
    ', 

    ', 
    
    ', 

    ', 
    

    

', u"
	/* SPECIAL MODE BAR */
	div.sw-special-mode-bar {
		background: #FBC243 url('http://www.springfield.k12.or.us/Static/V2_16_01//GlobalAssets/Images/special-mode-bar-background.png') no-repeat;
		height: 30px;
		text-align: left;
		font-size: 12px;
		position: relative;
		z-index: 10000;
	}
	div.sw-special-mode-bar > div {
		padding: 8px 0 0 55px;
		font-weight: bold;
	}
	div.sw-special-mode-bar > div > a {
		margin-left: 20px;
		background: #A0803D;
		-moz-border-radius: 5px;
		-webkit-border-radius: 5px;
		color: #fff;
		padding: 4px 6px 4px 6px;
		font-size: 11px;
	}
	
	body.blue div.sw-special-mode-bar, body.green div.sw-special-mode-bar, body.red div.sw-special-mode-bar {
	    display: none;
	}

	/* END SPECIAL MODE BAR */
", 

', 
	
	function SWEndPreviewMode() { 
		var data = "{}";
		var success = "window.location='';";
		var failure = "CallControllerFailure(result[0].errormessage);";
		CallController("http://www.springfield.k12.or.us/site/SiteController.aspx/EndPreviewMode", data, success, failure);
	}
	
	function SWEndEmulationMode() {
		SetUnescapedCookie('UserID', GetCookie('SourceEmulationUserID'));
		DeleteCookie('SourceEmulationUserID');
		window.location = 'http://www.springfield.k12.or.us/ums/Users/Users.aspx';
	}

	function SWEndPreviewConfigMode() {
	    var data = "{}";
	    var success = "window.location='';";
	    var failure = "CallControllerFailure(result[0].errormessage);";
	    CallController("http://www.springfield.k12.or.us/site/SiteController.aspx/EndPreviewConfigMode", data, success, failure);
	}
', 
            

    ', 
', 
', 
', 
', District Home', 
', 
', 
', 
', Sign In', 
', 
', 
$(document).ready(function() {
    $('#sw-search-input').keyup(function(e) {        if (e.keyCode == 13) {
            SWGoToSearchResultsPageswsearchinput();
        }
    });
    $('#sw-search-input').val($('#swsearch-hid-word').val())});
function SWGoToSearchResultsPageswsearchinput() {
window.location.href="http://www.springfield.k12.or.us/site/Default.aspx?PageType=6&SiteID=1&SearchString=" + $('#sw-search-input').val();
}
', 
', 
', 
', 
', 
', 
', 
', 
', 
', 
	', 
		', 
			', 
				', 
				', 
				', 
				', 
				', 
				', 
				', Site Map',  

				', 
				', 
				', 
				', 
				', 
				', 
			', 
			', 
				', 
				', 
				', 
					Home >  > 
				', 
			', 
			', 
				', 
', 
', Home', 
', 
', 
', Our District', 
', 
', About Us', 
', Contacts', 
', Leadership and Board', 
', District Initiatives', 
', Programs and Services', 
', Springfield Education Foundation', 
', Springfield Success!', 
', 
', 
', 
', Schools', 
', 
', Our Schools', 
', Preschool', 
', Elementary Schools', 
', Middle Schools', 
', High Schools', 
', Charter Schools', 
', SPS Online', 
', School Library Info', 
', 
', 
', 
', Departments', 
', 
', Departments Overview', 
', Superintendent', 
', Business Operations', 
', Communications', 
', Facilities', 
', Health Services', 
', Human Resources', 
', Instruction', 
', Nutrition Services', 
', Print and Design Services', 
', Technology Services', 
', Transportation', 
', 
', 
', 
', Community', 
', 
', Our Community', 
', Demographics', 
', Informational Resources', 
', Legislative Contacts', 
', TEAM Springfield', 
', Volunteer Opportunities', 
', 
', 
', 
', User Groups', 
', 
', What Are User Groups?', 
', Students', 
', Parents', 
', SPS Staff', 
', 
', 
', 
', News', 
', 
', Press Room', 
', Headlines', 
', Social Media', 
', News Releases', 
', SPS in the News', 
', Publications/Multimedia', 
', School Delays/Closures', 
', 
', 
', 
', Calendars', 
', 
', Calendar Options', 
', District Academic Calendar', 
', Board Meeting Calendar', 
', Online District Event Calendar', 
', SHS School Calendar', 
', THS School Calendar', 
', A3 School Calendar', 
', WLA Middle School Calendar', 
', WLA High School Calendar', 
', 
', 
', 
', Español', 
', 
', ¿Qué hay de nuevo?', 
', Información de Contacto', 
', Inscribir a Su Hijo en el Kinder', 
', Informacíon Sobre Requisitos de Prueba de Dirección de Casa', 
', Información Sobre Nuestro Distrito y Nuestras Escuelas', 
', Transferencias a Nuestro Distrito Escolar', 
', Politica de Transferencias Dentro del Distrito', 
', Calendario Escolar', 
', Doble Inmersión Lingüística en Guy Lee', 
', El Desarrollo del Idioma Inglés (ELD)', 
', En Caso de Mal Tiempo', 
', Estándares Estatales Básicos Comunes', 
', Información Sobre la Medida', 
', Los Reportes del Estado', 
', Nuestra Visión y Misión', 
', More', 
', 
', 
', 



', 
    $(document).ready(function() {
        channelHoverIE();
        channelTouch();
    });

    function channelTouch() {
        // this will change the dropdown behavior when it is touched vs clicked.
        // channels will be clickable on second click. first click simply opens the menu.
        $('#channel-navigation > .sw-channel-item > a').on({
            'touchstart': function (e) {
                
                // see if has menu
                if ($(this).siblings('ul.sw-channel-dropdown').length > 0) {
                    var button = $(this);

                    // add href as property if not already set
                    // then remove href attribute
                    if (!button.prop('linkHref')) {
                        button.prop('linkHref', button.attr('href'));
                        button.removeAttr('href');
                    }

                    // check to see if menu is already open
                    if ($(this).siblings('ul.sw-channel-dropdown').is(':visible')) {
                        // if open go to link
                        window.location.href = button.prop('linkHref');
                    } 

                } 
            }
        });
    }


    
    function channelHoverIE(){
		// set z-index for IE7
		var parentZindex = $('#channel-navigation').parents('div:first').css('z-index');
		var zindex = (parentZindex > 0 ? parentZindex : 8000);
		$(".sw-channel-item").each(function(ind) {
			$(this).css('z-index', zindex - ind);
			zindex --;
		});
	    $(".sw-channel-item").hover(function(){
	        var subList = $(this).children('ul');
	        if ($.trim(subList.html()) !== "") {
		        subList.show();
		    }
		    $(this).addClass("hover");
	    }, function(){
		    $(".sw-channel-dropdown").hide();
		    $(this).removeClass("hover");
	    });
    }

', 


			', 
		', 
	', 
	', 
		', 
', 
', 

', u"
	span.fc-event-title.ellipsis {
		-moz-binding: url('http://www.springfield.k12.or.us//cms/Module/Calendar/ellipsis.xml#ellipsis');
	}
	
	#calendar-pnl-toolbar select {
	    margin: 0 0 10px 0;
	}
", 

', 
', 
', 
    eventDateID = 0;
    currentMonth = 0;
    currentYear = 0;

    $(document).ready(function() {		   
        // ADA click events
        $("#calendar-pnl-filter-toggle a").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $("#calendar-btn-print").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $("#A1").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $("#calendar-btn-calendarfollow").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $("#calendar-btn-icalfed").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $("#calendar-btn-change-today").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $("#calendar-btn-change-day").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $("#calendar-btn-change-week").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $("#calendar-btn-change-month").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $("#ui-btn-calendarlist-list").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $("#ui-btn-calendarlist-back").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $("#ui-btn-calendarlist-forward").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $(".calendar-filter-btn").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $(".category-filter-btn").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $(document).on('click', '.ui-datepicker-calendar td a', function() {
            fixADA();
        });

        $(document).on('click', '.ui-datepicker-calendar td a', function() {
            fixADA();
        });

		// Don't show the sidebar if the width is not greater than 900 px.
	    var intCalendarWidth = $("#calendar-pnl-calendarcontainer").width();

		if (intCalendarWidth < 900 ) {
			$("#calendar-pnl-smcalendar").addClass('ui-helper-hidden')
		}
			
		var thisYear = new Date().getFullYear();

	    $('#calendarlist-year').append('<option value="' + (thisYear - 1) + '">' + (thisYear - 1) + '</option>')
				.append('<option selected="selected" value="' + thisYear + '">' + (thisYear) + '</option>')
	            .append('<option value="' + (thisYear + 1) + '">' + (thisYear + 1) + '</option>')
	            .append('<option value="' + (thisYear + 2) + '">' + (thisYear + 2) + '</option>')
	            .append('<option value="' + (thisYear + 3) + '">' + (thisYear + 3) + '</option>')
	            .append('<option value="' + (thisYear + 4) + '">' + (thisYear + 4) + '</option>')
	            .append('<option value="' + (thisYear + 5) + '">' + (thisYear + 5) + '</option>')
	            .append('<option value="' + (thisYear + 6) + '">' + (thisYear + 6) + '</option>')
	            .append('<option value="' + (thisYear + 7) + '">' + (thisYear + 7) + '</option>');
	    
	    var thisMonth;
	    //if (eventDateID > 0) {
	    //	thisMonth = 0;
	    //} else {
	    	thisMonth = new Date().getMonth();
	    //}

	    $('#calendarlist-month').val(thisMonth + 1).change();

	    //function LoadEventPrint() {	
        //		var view = $('#calendar').fullCalendar('getView');
    //		var month = $('#calendar').fullCalendar('getmonth');
//		var date = $('#calendar').fullCalendar('getdate');
//		var year = $('#calendar').fullCalendar('getyear');
//		if(!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')){
//			view = "list";
//			month = $('#calendarlist-month').val() - 1;
//            year = $('#calendarlist-year').val();
//		} 
//		
//OpenWindow('http://www.springfield.k12.or.us//site/UserControls/Calendar/CalendarPrint.aspx?ModuleInstanceID=175&PageID=2&Date=' + date + '&Month=' + month + '&Year=' + year + '&View=' + view, 'PrintCalendar', 'width=' + (screen.width - 100) + ',height=' + (screen.height - 100) + ',menubar=yes');
	    // }

        //remove extra datepicker div that gets added into footer
	    if ($('#ui-datepicker-div').length){
	        $('#ui-datepicker-div').hide();
	    }

        $('#calendar').fullCalendar({
	        editable: false,
	        header: {
	            left: '',
	            center: 'title',
	            right: ''
	        },
            month: new Date().getMonth(),
            date: new Date().getDate(),
            year: new Date().getFullYear(),
            defaultView: 'month',
	        weekMode: 'liquid',
	        timeFormat: 'h:mmtt',
	        events: function(start, end, callback) {
                $.ajax({
                    type: "POST",
                    url: "http://www.springfield.k12.or.us//site/UserControls/Calendar/CalendarController.aspx/GetEvents",
                    data: "{ModuleInstanceID: 175, " +
                                "StartDate: '" + (parseInt(start.getMonth()) + 1) + "/" + start.getDate() + "/" + start.getFullYear() +  "', " +
                                "EndDate: '" + (parseInt(end.getMonth()) + 1) + "/" + end.getDate() + "/" + end.getFullYear() + "'}", 
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    cache: false,
                    success: function(result) { 
                        var calevents = eval(result.d);
	                    callback(calevents);
						$('.fc-event-title').addClass('ellipsis');
                    }
                });
	        }, 
	        eventClick: function(calEvent, jsEvent, view) {
	            if ($(this).hasClass('fc-event-more')) {
	                $('#calendar').find('td.fc-active-day').removeClass('fc-active-day');

	                // get weekday and date
	                var dayClass;
	                var dateClass = 'fc-day' + (calEvent.start.getDate() - 1);

	                switch (calEvent.start.getDay()) {
	                    case 0:
	                        dayClass = 'fc-sun';
	                        break;
	                    case 1:
	                        dayClass = 'fc-mon';
	                        break;
	                    case 2: 
	                        dayClass = 'fc-tue';
	                        break;
	                    case 3:
	                        dayClass = 'fc-wed';
	                        break;
	                    case 4:
	                        dayClass = 'fc-th;
	                        break;
	                    case 5:
	                        dayClass = 'fc-fri';
	                        break;
	                    case 6:
	                        dayClass = 'fc-sat';
	                        break;
	                }

	                $('td.' + dayClass + '.' + dateClass).addClass('fc-active-day').attr('m', calEvent.start.getMonth()).attr('d', calEvent.start.getDate()).attr('y', calEvent.start.getFullYear());
	                ChangeView('basicDay', calEvent.start);
	            } else {
                    LoadEventDetail(calEvent.id);
	            }
	        },
	        eventMouseover: function(calEvent, jsEvent, view) {
	            ShowEventOverlay(this, calEvent.id, calEvent.eventid, calEvent.recurringevent, calEvent.title, calEvent.start, calEvent.end, calEvent.noendtime);
	        },
	        eventMouseout: function() {
	            $('#calendar-event-overlay').remove();
	        },
	        dayClick: function(dayDate, allDay, jsEvent, view) {
	            // highlight the day and set it to active
	            $('#calendar').find('td.fc-active-day').removeClass('fc-active-day');
	            $(this).addClass('fc-active-day').attr('m', dayDate.getMonth()).attr('d', dayDate.getDate()).attr('y', dayDate.getFullYear());
	        },
	        dayRender: function(date, cell) {
	            cell.bind('dblclick', function() {
	                $('#calendar').fullCalendar('changeView', 'basicDay');
	                $('#calendar').fullCalendar('gotoDate', date);
	            });
	        },
	        viewDisplay: function(view) {
	            var startDate = new Date();
	            var endDate = new Date();

	            startDate = view.start;
	            endDate = view.end;

	            var view = $('#calendar').fullCalendar('getView');
	                
	            // if month view, save month
	            if (view.name == 'month') {
	                var d = $('#calendar').fullCalendar('getDate');
                    
	                currentMonth = $.fullCalendar.formatDate(d, 'M');
	                currentYear = $.fullCalendar.formatDate(d, 'yyyy');

	                currentMonth = currentMonth - 1;

	                /*currentMonth = $('#calendar').fullCalendar('getmonth');
	                currentYear = $('#calendar').fullCalendar('getyear');*/

	                $('#calendarlist-month').val(currentMonth + 1);
	                ChangeYearDropDown(currentYear);
                    $("#calendar-pnl-title h1").text(getFullMonth(currentMonth + 1) + " " + currentYear);
	            } else if (view.name == 'basicWeek') {
                    // select day
                    if ('' == 'basicWeek') {
                        var curdate = new Date(0, 0, 0);
                        var dateClass = 'fc-day' + curdate.getDay();
                        $('td.' + dateClass).addClass('fc-active-day').attr('m', curdate.getMonth()).attr('d', curdate.getDate()).attr('y', curdate.getFullYear());
                    }

	                // first see if week falls inside same month
	                if (startDate.getMonth() == endDate.getMonth()) {
	                    $('#calendarlist-month').val(startDate.getMonth() + 1);
	                    ChangeYearDropDown(startDate.getFullYear());
                        $("#calendar-pnl-title h1").text(getFullMonth(startDate.getMonth() + 1) + " " + startDate.getFullYear());
	                } else {
	                    // see if part of original month still shows
	                    if ((startDate.getMonth() == currentMonth && startDate.getFullYear() == currentYear) || (endDate.getMonth() == currentMonth && endDate.getFullYear() == currentYear)) {
	                         $('#calendarlist-month').val(currentMonth + 1);
	                         ChangeYearDropDown(currentYear);
                             $("#calendar-pnl-title h1").text(getFullMonth(currentMonth + 1) + " " + currentYear);
	                    } else {
	                        // moved away from that month, see which month covers more area
	                        if (endDate.Date < 3) {
	                            $('#calendarlist-month').val(endDate.getMonth() + 1);
	                            ChangeYearDropDown(endDate.getFullYear());
                                $("#calendar-pnl-title h1").text(getFullMonth(endDate.getMonth() + 1) + " " + endDate.getFullYear());
	                        } else {
	                            $('#calendarlist-month').val(startDate.getMonth() + 1);
	                            ChangeYearDropDown(startDate.getFullYear());
                                $("#calendar-pnl-title h1").text(getFullMonth(startDate.getMonth() + 1) + " " + startDate.getFullYear());
	                        }
	                    }
	                }
	            } else if (view.name == 'basicDay') {
	                $('#calendarlist-month').val(startDate.getMonth() + 1);
	                ChangeYearDropDown(startDate.getFullYear());
                    $("#calendar-pnl-title h1").text(getFullMonth(startDate.getMonth() + 1) + " " + startDate.getFullYear());
	            }
	            
	           //alert('finished - dropdown says ' + $('#calendarlist-month').val() + ', calendar says ' + $('#calendar').fullCalendar('getmonth'));
	            
				if (!$('#calendar-pnl-smcalendar').hasClass('ui-helper-hidden')) {
				    var d = $('#calendar').fullCalendar('getDate');
                    
				    var myMonth = $.fullCalendar.formatDate(d, 'M');
				    var myYear = $.fullCalendar.formatDate(d, 'yyyy');

				    myMonth = myMonth - 1;

				    $('#small-calendar-1').datepicker('setDate', new Date(myYear, myMonth));
				}

				// set toggle button classes
				$('#calendarview-toggle a').removeClass('active');

				switch (view.name) {
					case 'month':
						$('#calendarview-toggle a.month').addClass('active');
						break;
					case 'basicWeek':
						$('#calendarview-toggle a.week').addClass('active');
						break;
					case 'basicDay':
						$('#calendarview-toggle a.day').addClass('active');
						break;
				}
	        },
            eventRender: function(event, eventElement) {
                var view = $('#calendar').fullCalendar('getView');

                eventElement.attr('tabIndex', 0);

                eventElement.css("backgroundColor", event.CategoryColor);
                eventElement.css("borderColor", event.CategoryColor);

                eventElement.keydown(function(e) {
                    e.stopImmediatePropagation();

                    if (e.keyCode == 13) {
                        LoadEventDetail(event.id);
                    }
                });

                adjustColour(eventElement);

                if (event.nativeevent == 0) {
                    eventElement.addClass('calendarevent-locked');
                } else if (event.registration.toLowerCase() == "true") {
                    eventElement.addClass('calendarevent-register');
                } else if (event.mandatory.toLowerCase() == "true") {
                    eventElement.addClass('calendarevent-mandatory');
                }

                // check for dates to display that are spanning and in current month only
                // hide all single day events that don't fall in current month
                if (view.name == "month") {
                    var d = $('#calendar').fullCalendar('getDate');
                    var currentMonth = $.fullCalendar.formatDate(d, 'M');

                    var eventStartYear = $.fullCalendar.formatDate(event.start, "yyyy");
                    var eventEndYear = $.fullCalendar.formatDate(event.end, "yyyy");

                    var eventStartMonth = $.fullCalendar.formatDate(event.start, "M");
                    var eventEndMonth = $.fullCalendar.formatDate(event.end, "M");

                    if (eventEndYear == eventStartYear) {
                        if (eventStartMonth != currentMonth) {
                            /*if (event.start.getDate() - event.end.getDate() == 0) {
                                eventElement.addClass("ui-helper-hidden");
                            }*/

                            if ((parseInt(eventStartMonth, 10) > parseInt(currentMonth, 10)) || (parseInt(eventEndMonth, 10) < parseInt(currentMonth, 10))) {
                                eventElement.addClass("ui-helper-hidden");
                            }
                        }
                    }
                }
	        }
        });

        // set up small calendars
        $('#small-calendar-1').datepicker({ 
            dayNamesMin: ['', '', '', '', '', '', ''],
            numberOfMonths: [3, 1],
            monthNames: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
            onSelect: function(dateText, inst) { 
                var myDate = new Date(dateText);

                $('#calendar').fullCalendar('changeView', 'basicDay');
                $('#calendar').fullCalendar('gotoDate', myDate);
            }
        });
        
        $(document).on('click', '#calendar-tbl-calendars .ui-datepicker-title', function() {
            var tempMonth = $.trim($(this).text()).substring(0, 3);
            var myMonth = 0;
            var myYear = $.trim($(this).text()).substring(3);

            switch (tempMonth.toLowerCase()) {
                case 'jan':
                    myMonth = 0;
                    break;
                 case 'feb':
                    myMonth = 1;
                    break;
                 case 'mar':
                    myMonth = 2;
                    break;
                 case 'apr':
                    myMonth = 3;
                    break;
                 case 'may':
                    myMonth = 4;
                    break;
                 case 'jun':
                    myMonth = 5;
                    break;
                 case 'jul':
                    myMonth = 6;
                    break;
                 case 'aug':
                    myMonth = 7;
                    break;
                 case 'sep':
                    myMonth = 8;
                    break;
                 case 'oct':
                    myMonth = 9;
                    break;
                 case 'nov':
                    myMonth = 10;
                    break;
                 case 'dec':
                    myMonth = 11;
                    break;
            }

            var myDate = new Date(parseInt(myYear), parseInt(myMonth));// parseInt necessary for safari

            $('#calendar').fullCalendar('changeView', 'month');
            $('#calendar').fullCalendar('gotoDate', myDate);
            
            if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
                myMonth = myMonth + 1;
                                
                $('#calendarlist-month').val(myMonth).change();
                $('#calendarlist-year').val($.trim(myYear)).change();
                
                if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
                    LoadEventListView(175, myMonth, myYear);
                }

                if (!$('#calendar-pnl-smcalendar').hasClass('ui-helper-hidden')) {
					    $('#small-calendar-1').datepicker('setDate', new Date(myYear, myMonth - 1));
				}
			}
        });
        
	    $(document).on('click', '#calendar-btn-myevents', function() {
            OpenDialogOverlay("WindowLargeModal", { LoadType: "U", LoadURL: "http://www.springfield.k12.or.us//site/UserControls/Calendar/MyEventsWrapper.aspx?ModuleInstanceID=175" });
        });

	    $(document).on('click', '#calendar-btn-legend', function() {
            OpenDialogOverlay("WindowMediumModal", { LoadType: "U", LoadURL: "http://www.springfield.k12.or.us//site/UserControls/Calendar/CategoryLegendWrapper.aspx?ModuleInstanceID=175" });
        });
        
	    $(document).on('click', '#eventexport-btn-save', function() {
		   $('#calendarexport-pnl-detail').validate({ onSuccess: EventDetailExportByDateRange });
		});
       
        if ('' == 'list') {
            LoadEventListView(175, 0, 0);
        }
        
	    $(document).on('click', '#myeventslist-btn-filter', function() {
            $('#myeventslist-pnl-toolbar').validate({ onSuccess: SearchMyEvents });
        });
        
	    $(document).on('change', '#calendarlist-month, #calendarlist-year', function() {
            $("#calendar-pnl-title h1").text(getFullMonth($('#calendarlist-month').val()) + " " + $('#calendarlist-year').val());
	    });

	    $('#calendar').fullCalendar('render');

        // remove table header for ADA compliance
        // add tabindex for table cells
	    fixADA();
   }); // end document ready
   
    function fixADA() {
        $(".ui-datepicker-calendar thead").remove();
        $(".ui-datepicker-calendar td").attr("tabindex", 0);
    }

    function ChangeYearDropDown(year) {
        if ( year < parseInt($('#calendarlist-year option:first').val())) {
            $('<option value="' + year + '">' + year + '</option>').insertBefore("#calendarlist-year option:first");
        } else if (year > parseInt($('#calendarlist-year option:last').val())) {
            $("#calendarlist-year").append('<option value="' + year + '">' + year + '</option>');
        }
    
        $('#calendarlist-year').val(year);
    }

	function ChangeView(type, eDate) {
        if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {                    
            $('#calendarlist-pnl-specialview').addClass('ui-helper-hidden');
            $('#calendar').removeClass('ui-helper-hidden');
            setTimeout("$('#calendar').fullCalendar('refetchEvents');", 500);
        }

        if (eDate !== undefined) { // clicked 'more' link
            var gotoDate = new Date(eDate.getFullYear(), eDate.getMonth(), eDate.getDate());

            $('#calendar').fullCalendar('gotoDate', gotoDate);
            $('#calendar').fullCalendar('changeView', type);
        } else if ($('#calendar').find('.fc-active-day').length > 0) { // active day
			var activeDay = $('td.fc-active-day');
			var gotoDate = new Date(activeDay.attr('y'), activeDay.attr('m'), activeDay.attr('d'));

			$('#calendar').fullCalendar('gotoDate', gotoDate);
            $('#calendar').fullCalendar('changeView', type);
        } else { // go to view w/o changing
            var gotoDate = new Date($('#calendarlist-year').val(), ($('#calendarlist-month').val() - 1), 1);
            $('#calendar').fullCalendar('gotoDate', gotoDate);
            $('#calendar').fullCalendar('changeView', type);
        }

	    // remove table header for ADA compliance
	    // add tabindex for table cells
        fixADA();
    }
	
	function LoadEventDetail(eventDateID, userRegID, isEdit) {
	    (userRegID === undefined ? userRegID = 0 : '');
	    (isEdit === undefined ? isEdit = false : '');
	   
        var isListView = !$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')
        var currentView = $('#calendar').fullCalendar('getView');

        if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
            currentView = 'list';
        } else {
            currentView = currentView.name;
        }

        /*var currentDate = $('#calendar').fullCalendar('getdate');
        var currentMonth = $('#calendar').fullCalendar('getmonth');
        var currentYear = $('#calendar').fullCalendar('getyear');*/

        var currentDate = $('#calendar').fullCalendar('getDate');
        var currentMonth = $.fullCalendar.formatDate(currentDate, 'M');
        var currentYear = $.fullCalendar.formatDate(currentDate, 'yyyy');

        currentMonth = currentMonth - 1;

        parent.location.href = "http://www.springfield.k12.or.us//site/Default.aspx?PageID=2&PageType=17&DomainID=1&ModuleInstanceID=175&EventDateID=" + eventDateID + "&CurrentView=" + currentView; //"&UserRegID=" + userRegID + "&IsEdit=" + isEdit;
    }
	
	function ShowEventOverlay(obj, eventDateID, eventID, recurring, title, start, end, noEndTime) {
        $this = $(obj);
        $('#calendar-event-overlay').remove();

        // get date for display
		var startDate = (start.getMonth() + 1) + '/' + start.getDate() + '/' + start.getFullYear();
		var endDate = "";
	    //if (end !== null) {
		    endDate = (end.getMonth() + 1) + '/' + end.getDate() + '/' + end.getFullYear();
        //} else endDate = startDate;
		
		var strDate = "";
		var allDay = false;
		//var noEndTime = false;
		
		// get times
		var startHour = start.getHours().toString();
		var startMinute = start.getMinutes().toString();

		var startTime = (startHour < 12 ? (startHour.length == 2 ? startHour : (startHour == "0" ? "12" : "0" + startHour)) + ":" + (startMinute.length == 2 ? startMinute : "0" + startMinute) + " am" : ((startHour - 12).toString().length == 2 ? startHour - 12 : (startHour - 12 == 0 ? "12" : "0" + (startHour - 12))) + ":" + (startMinute.length == 2 ? startMinute : "0" + startMinute) + " pm");
		
		var endHour = "";
		var endMinute = "";

	    if (end !== null) {
		    endHour = end.getHours().toString();
		    endMinute = end.getMinutes().toString();
	    } else {
		    endHour = "00";
		    endMinute = "00";
	    }

        var endTime = (endHour < 12 ? (endHour.length == 2 ? endHour : "0" + endHour) + ":" + (endMinute.length == 2 ? endMinute : "0" + endMinute) + " am" : ((endHour - 12).toString().length == 2 ? endHour - 12 : (endHour - 12 == 0 ? "12" : "0" + (endHour - 12))) + ":" + (endMinute.length == 2 ? endMinute : "0" + endMinute) + " pm");
		
        // check if all day
		if (startTime == "12:00 am" && endTime == "11:59 pm") {
			allDay = true;
		}
		
		// check no end time for migrated data
	    //if (endTime == "00:00 am") {
		//    noEndTime = true;
	    //}
	
		// set start date
		strDate += startDate;

		// add time if not all day
		if (allDay == false) {
			strDate += ' ' + startTime;
		}

		// if not same day, add end date
		if (startDate != endDate) {
			strDate += ' to ' + endDate;
		}

		// add end time if not all day
		if (allDay == false && noEndTime == false) {
			if (startDate != endDate) {
				strDate += ' ' + endTime;
			} else {
				strDate += ' to  ' + endTime;
			}
		}

		// check title length and add ellipsis if necessary
		if (title.length > 70) {
		    title = title.substring(0, 69) + '...';
		}

        $('body').append('<div id="calendar-event-overlay"><h1>' + title.replace(/&/g, '&amp').replace(/\"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;')  + "</h1><h2> " + strDate + '</h2></span></div>');
        
        $(document).on('click', function() {
            $('#calendar-event-overlay').remove();
        });

        $('#calendar-event-overlay').css({
			'left': ($this.offset().left + -5) + 'px',
            'top': ($this.offset().top + $this.outerHeight()) + 'px'
        }).bind('mouseleave', function() {
            $(this).remove();
        });
	}

    function EditMyEventRegistration(eventDateID, userRegID) {
        //LoadEventRegistrationEdit(userRegID);
        LoadEventDetail(eventDateID, userRegID, true)
    }
    
    function RemoveMyEventRegistration(userRegID,EventDateID) {
        //var data = "{userRegID:" + userRegID + ", EventDateID:" + EventDateID + "}";
        swalert('Are you sure you want to remove this registration?','Remove Registration','critical','yesno',YesRemoveMyEventRegistration,'','',{userRegID:userRegID,EventDateID:EventDateID});
    }
    
    function YesRemoveMyEventRegistration(userData) {
        var data = "{UserRegistrationID: " + userData.userRegID  + ", EventDateID: " + userData.EventDateID + "}";
        var StartDate;
        var EndDate;

        if ($('#myeventslist-txt-startdate').val() == '') {
            StartDate = '1/1/1900';
        } else {
            StartDate = $('#myeventslist-txt-startdate').val();
        }

        if ($('#myeventslist-txt-enddate').val() == '') {
            EndDate = '1/1/1900';
        } else {
            EndDate = $('#myeventslist-txt-enddate').val();
        }       
              
        if (StartDate != '1/1/1900') {
            StartDate += ' 0:00:00';
        }

        if (EndDate != '1/1/1900') {
            EndDate += ' 23:59:59';
        }

        var success = 'GetContent("http://www.springfield.k12.or.us//site/UserControls/Calendar/MyEventsListWrapper.aspx?ModuleInstanceID=175&StartDate=' + StartDate + '&EndDate=' + EndDate + '", "myeventslist-pnl-detail", 2, ""); ShowNotification("Success! You have deleted your registration for this event.");';
        var failure = 'CallControllerFailure(result[0].errormessage);';
        
        CallController("http://www.springfield.k12.or.us//site/UserControls/Calendar/CalendarController.aspx/DeleteRegistration", data, success, failure);
    } 
       
    function LoadEventListView(ModuleInstanceID, Month, Year) {
		$('#calendarview-toggle a').removeClass('active');
		$('#calendarview-toggle a.list').addClass('active');

        $('#calendarlist-pnl-specialview').removeClass('ui-helper-hidden');
        $('#calendar').addClass('ui-helper-hidden');

        Month = $('#calendarlist-month').val();
        Year = $('#calendarlist-year').val();

        GetContent("http://www.springfield.k12.or.us//site/UserControls/Calendar/EventListViewWrapper.aspx?ModuleInstanceID=" + ModuleInstanceID + "&Month=" + Month + "&Year=" + Year, "calendarlist-pnl-specialview", 2, '');
    }

    function ChangeMonth() { 
        var itemid = $('#calendarlist-month').val();
        $('#calendar').find('td.fc-active-day').removeClass('fc-active-day');
        var gotoDate = new Date($('#calendarlist-year').val(), (itemid - 1), 1);
        $('#calendar').fullCalendar('gotoDate', gotoDate);

        if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
            LoadEventListView(175, $('#calendar').fullCalendar('getmonth'), $('#calendar').fullCalendar('getyear'));
        }
        
        if (!$('#calendar-pnl-smcalendar').hasClass('ui-helper-hidden')) {
	        $('#small-calendar-1').datepicker('setDate', new Date($('#calendarlist-year').val(), parseInt($('#calendarlist-month').val()-1)));
        }    
        
        // remove table header for ADA compliance
        // add tabindex for table cells
        fixADA();
    }

    function ChangeYear(itemid) { 
		var itemid = $('#calendarlist-year').val();
        $('#calendar').find('td.fc-active-day').removeClass('fc-active-day');
        var gotoDate = new Date(itemid, ($('#calendarlist-month').val() - 1), 1);
        $('#calendar').fullCalendar('gotoDate', gotoDate);

        if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
            LoadEventListView(175, $('#calendar').fullCalendar('getmonth'), $('#calendar').fullCalendar('getyear'));
        }
        
        if (!$('#calendar-pnl-smcalendar').hasClass('ui-helper-hidden')) {
		    $('#small-calendar-1').datepicker('setDate', new Date($('#calendarlist-year').val(), parseInt($('#calendarlist-month').val()-1)));
        }

        // remove table header for ADA compliance
        // add tabindex for table cells
        fixADA();
    }

    function GoToNext() {
        $('#calendar').find('td.fc-active-day').removeClass('fc-active-day');
        $('#calendar').fullCalendar('next');

        if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
            var month = parseInt($('#calendarlist-month').val()) + 1;
            var year = parseInt($('#calendarlist-year').val());

            if (month > 12) {
                month = 1;
                year = year + 1;
            }

            $('#calendarlist-month').val(month).change();
            ChangeYearDropDown(year);
            $('#calendarlist-year').val(year).change();
            
            if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
                LoadEventListView(175, $('#calendar').fullCalendar('getmonth'), $('#calendar').fullCalendar('getyear'));
            }

            if (!$('#calendar-pnl-smcalendar').hasClass('ui-helper-hidden')) {
				$('#small-calendar-1').datepicker('setDate', new Date($('#calendarlist-year').val(), parseInt($('#calendarlist-month').val())-1));
			}
        }

        // remove table header for ADA compliance
        // add tabindex for table cells
        fixADA();
    }
    
    function GoToPrevious() {
        $('#calendar').find('td.fc-active-day').removeClass('fc-active-day');
        $('#calendar').fullCalendar('prev');

        if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
            var month = $('#calendarlist-month').val() - 1;
            var year = $('#calendarlist-year').val();

            if (month < 1) {
                month = 12;
                year = year - 1;
            }

            $('#calendarlist-month').val(month).change();
            ChangeYearDropDown(year);
            $('#calendarlist-year').val(year).change();
            
            if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
                LoadEventListView(175, $('#calendar').fullCalendar('getmonth'), $('#calendar').fullCalendar('getyear'));
            }

            if (!$('#calendar-pnl-smcalendar').hasClass('ui-helper-hidden')) {
				$('#small-calendar-1').datepicker('setDate', new Date($('#calendarlist-year').val(), parseInt($('#calendarlist-month').val())-1));
			}
        }

        // remove table header for ADA compliance
        // add tabindex for table cells
        fixADA();
    }
    
    function GoToToday() {
        $('#calendar').find('td.fc-active-day').removeClass('fc-active-day');
        $('#calendar').fullCalendar('today');

        if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
            LoadEventListView(175, $('#calendar').fullCalendar('getmonth'), $('#calendar').fullCalendar('getyear'));
        }

        // remove table header for ADA compliance
        // add tabindex for table cells
        fixADA();
    }

    function LoadEventPrint() {
        var view = $('#calendar').fullCalendar('getView');
        view = view.name;

		/*var month = $('#calendar').fullCalendar('getmonth');
		var date = $('#calendar').fullCalendar('getdate');
		var year = $('#calendar').fullCalendar('getyear');*/

        var date = $('#calendar').fullCalendar('getDate');
        var month = $.fullCalendar.formatDate(date, 'M');
        var day = $.fullCalendar.formatDate(date, 'd');
        var year = $.fullCalendar.formatDate(date, 'yyyy');

        month = month - 1;

		if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
			view = "list";
			month = $('#calendarlist-month').val() - 1;
            year = $('#calendarlist-year').val();
		} 
		
		OpenWindow('http://www.springfield.k12.or.us//site/UserControls/Calendar/CalendarPrint.aspx?ModuleInstanceID=175&PageID=2&DomainID=1&Date=' + day + '&Month=' + month + '&Year=' + year + '&View=' + view, 'PrintCalendar', 'width=' + (screen.width - 100) + ',height=' + (screen.height - 100) + ',menubar=yes,scrollbars=yes,top=0,left=0,resizable=yes');
    }
	
    function ToggleEventListDetail() {
        if ($('#eventlist-chk-toggledetail').is(':checked')) {
            $('.ui-eventlistview-detail').removeClass('ui-helper-hidden');
        } else {
            $('.ui-eventlistview-detail').addClass('ui-helper-hidden');
        }
    }

    function LoadEventExportByDateRange() {
        OpenDialogOverlay("WindowMediumModal", { LoadType: "U", LoadURL: "http://www.springfield.k12.or.us//site/UserControls/Calendar/EventExportByDateRangeWrapper.aspx" });
    }

    function EventDetailExportByDateRange() {
        var eventDate = new Date($('#eventexport-txt-startdate').val());
        var endDate = new Date($('#eventexport-txt-enddate').val());
                
        if (endDate < eventDate) {
            swalert('The start date must come before the end date.', 'Attention', 'warning', 'ok');
            return false;
        }

        document.location.href = "http://www.springfield.k12.or.us//site/UserControls/Calendar/EventExport.aspx?ModuleInstanceID=175&StartDate=" + $('#eventexport-txt-startdate').val() + "&EndDate=" + $('#eventexport-txt-enddate').val();
        CloseDialogOverlay('WindowMediumModal');
    }

    function getFullMonth(monthValue) {
        monthValue = parseInt(monthValue);
        var fullMonth = "";

        switch(monthValue) {
            case 1:
                fullMonth = "January";
                break;
            case 2:
                fullMonth = "February";
                break;
            case 3:
                fullMonth = "March";
                break;
            case 4:
                fullMonth = "April";
                break;
            case 5:
                fullMonth = "May";
                break;
            case 6:
                fullMonth = "June";
                break;
            case 7:
                fullMonth = "July";
                break;
            case 8:
                fullMonth = "August";
                break;
            case 9:
                fullMonth = "September";
                break;
            case 10:
                fullMonth = "October";
                break;
            case 11:
                fullMonth = "November";
                break;
            case 12:
                fullMonth = "December";
                break;
        }

        return fullMonth;
    }
    
    function SearchMyEvents() {
        var StartDate;
        var EndDate;

        if ($('#myeventslist-txt-startdate').val() == '') {
            StartDate = '1/1/1900';
        } else {
            StartDate = $('#myeventslist-txt-startdate').val();
        }

        if ($('#myeventslist-txt-enddate').val() == '') {
            EndDate = '1/1/1900';
        } else {
            EndDate = $('#myeventslist-txt-enddate').val();
        }
        
        if ((StartDate != '1/1/1900') && (EndDate != '1/1/1900')) {
            if (new Date(StartDate) > new Date(EndDate)) {
                swalert('The start date must come before the end date.', 'Attention', 'warning', 'ok', '', '', '');
                return false;
            }
        } else if ((EndDate != '1/1/1900') && (StartDate == '1/1/1900')) {
            var CurrentDate = new Date();

            StartDate = (parseInt(CurrentDate.getMonth()) + 1) + "/" + CurrentDate.getDate() + "/" + CurrentDate.getFullYear();

            if (new Date(StartDate) > new Date(EndDate)) {
                swalert('The end date must come after the current date.', 'Attention', 'warning', 'ok', '', '', '');
                return false;
            }
        }
              
        if (StartDate != '1/1/1900') {
            StartDate += ' 0:00:00';
        }

        if (EndDate != '1/1/1900') {
            EndDate += ' 23:59:59';
        }

        GetContent("http://www.springfield.k12.or.us//site/UserControls/Calendar/MyEventsListWrapper.aspx?ModuleInstanceID=175&StartDate=" + StartDate + "&EndDate=" + EndDate, "myeventslist-pnl-detail", 2, '');
    }

    function RefreshCalendarFilter() {
        if ($('#calendar-pnl-calendarfilter-closed').is(':visible')) {
            GetContent("http://www.springfield.k12.or.us//site/UserControls/Calendar/CalendarFilterListWrapper.aspx?ModuleInstanceID=" + "175" + "&Expanded=" + false, "calendar-pnl-calendarfilter-closed", 2);
        } else {
            GetContent("http://www.springfield.k12.or.us//site/UserControls/Calendar/CalendarFilterListWrapper.aspx?ModuleInstanceID=" + "175" + "&Expanded=" + true, "calendar-pnl-calendarfilter-open", 2);             
        }
    }
    
    function ToggleCalendarFilter(expanded) {
        if (expanded === undefined) {
            expanded = $('#calendar-pnl-calendarfilter-closed').is(':visible');
        }

        if (expanded === true) {
            var callback = "$('#calendar-pnl-calendarfilter-closed').fadeOut('fast',function() { $('#calendar-pnl-calendarfilter-open').fadeIn('fast');});";
            GetContent("http://www.springfield.k12.or.us//site/UserControls/Calendar/CalendarFilterListWrapper.aspx?ModuleInstanceID=" + "175" + "&Expanded=" + true, "calendar-pnl-calendarfilter-open", 3, callback);
        } else {
            var callback = "$('#calendar-pnl-calendarfilter-open').fadeOut('fast',function() { $('#calendar-pnl-calendarfilter-closed').fadeIn('fast');});";
            GetContent("http://www.springfield.k12.or.us//site/UserControls/Calendar/CalendarFilterListWrapper.aspx?ModuleInstanceID=" + "175" + "&Expanded=" + false, "calendar-pnl-calendarfilter-closed", 3, callback); 
        }
    }

    function OpenCalendarFilter() {
        OpenDialogOverlay("WindowLargeModal", { LoadType: "U", LoadURL: "http://www.springfield.k12.or.us//site/UserControls/Calendar/CalendarFilterNewWrapper.aspx?DomainID=1&ModuleInstanceID=175" });
    }

    function RefreshCategoryFilter() {
        if ($('#calendar-pnl-categoryfilter-closed').is(':visible')) {
            GetContent("http://www.springfield.k12.or.us//site/UserControls/Calendar/CategoryFilterListWrapper.aspx?ModuleInstanceID=" + "175" + "&Expanded=" + false, "calendar-pnl-categoryfilter-closed", 2);
        } else {
            GetContent("http://www.springfield.k12.or.us//site/UserControls/Calendar/CategoryFilterListWrapper.aspx?ModuleInstanceID=" + "175" + "&Expanded=" + true, "calendar-pnl-categoryfilter-open", 2);             
        }
    }

    function ToggleCategoryFilter(expanded) {
        if (expanded === undefined) {
            expanded = $('#calendar-pnl-categoryfilter-closed').is(':visible');
        }

        if (expanded === true) {
            var callback = "$('#calendar-pnl-categoryfilter-closed').fadeOut('fast',function() { $('#calendar-pnl-categoryfilter-open').fadeIn('fast');});";
            GetContent("http://www.springfield.k12.or.us//site/UserControls/Calendar/CategoryFilterListWrapper.aspx?ModuleInstanceID=" + "175" + "&Expanded=" + true, "calendar-pnl-categoryfilter-open", 3, callback);
        } else {
             var callback = "$('#calendar-pnl-categoryfilter-open').fadeOut('fast',function() { $('#calendar-pnl-categoryfilter-closed').fadeIn('fast');});";
             GetContent("http://www.springfield.k12.or.us//site/UserControls/Calendar/CategoryFilterListWrapper.aspx?ModuleInstanceID=" + "175" + "&Expanded=" + false, "calendar-pnl-categoryfilter-closed", 3, callback); 
         }
     }

    function OpenCategoryFilter() {
        OpenDialogOverlay("WindowLargeModal", { LoadType: "U", LoadURL: "http://www.springfield.k12.or.us//site/UserControls/Calendar/CategoryFilterNewWrapper.aspx?DomainID=1&ModuleInstanceID=175" });
    }

    function RemoveCalendarFilter(ModuleInstanceID) {
        $('#calendarfilter-ul-list li[itemid=' + ModuleInstanceID + ']').remove();

        var strCalendarFilter = GetCookie('CalendarFilter');
        strCalendarFilter = strCalendarFilter.replace(ModuleInstanceID + '-', '');

        SetCookie('CalendarFilter', strCalendarFilter, 365);

        if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
            LoadEventListView(175, $('#calendar').fullCalendar('getmonth'), $('#calendar').fullCalendar('getyear'));
        } else {
            $('#calendar').fullCalendar('refetchEvents');
        }
    }

    function AddCategoryFilter(EventCategoryMasterID) {
        $('#categoryfilter-ul-list li[itemid=' + EventCategoryMasterID + ']').remove();

        var strCategoryFilter = GetCookie('CategoryFilter');
        strCategoryFilter = strCategoryFilter + EventCategoryMasterID + '-';

        SetCookie('CategoryFilter', strCategoryFilter, 365);

        if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
            LoadEventListView(175, $('#calendar').fullCalendar('getmonth'), $('#calendar').fullCalendar('getyear'));
        } else {
            $('#calendar').fullCalendar('refetchEvents');
        }
    }

    function UpdateCalendarFilter(id) {
        var strCalendarFilter = GetCookie('CalendarFilter');

        if ($('#calendarfilter-chk-calendar' + id).is(':checked')) {
            strCalendarFilter = strCalendarFilter + id + '-';
        } else {
            strCalendarFilter = strCalendarFilter.replace(id + '-', '');
        }

        SetCookie('CalendarFilter', strCalendarFilter, 365);
    }  

    function LoadCalendarChannelList() {
        GetContent("http://www.springfield.k12.or.us//site/UserControls/Calendar/CalendarChannelListWrapper.aspx?DomainID=" + $('#calendarfilter-hid-siteid').val(), "calendarfilter-pnl-channellist", 2);
        LoadCalendarSearchList();
    }  

    function SelectFilteredCalendars() {
        var arrValues = GetCookie('CalendarFilter').split('-');
        
        $.each(arrValues, function() {
            $('#calendarfilter-chk-calendar' + this).attr('checked', true);
        });
    }   

    function LoadCalendarSearchList() {
        var DomainID = $('#calendarfilter-hid-channelid').val();

        if (DomainID == 0) {
            DomainID = $('#calendarfilter-hid-siteid').val();
        }

        GetContent("http://www.springfield.k12.or.us//site/UserControls/Calendar/CalendarSearchListWrapper.aspx?DomainID=" + DomainID + "&ModuleInstanceID=" + "175" + "&SearchFor=" + $('#calendarfilternew-txt-search').val(), "calendarfilter-pnl-results", 2, '');
    } 

    function CloseCalendarFilter() {
        CloseDialogOverlay('WindowLargeModal');

        if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
            LoadEventListView(175, $('#calendar').fullCalendar('getmonth'), $('#calendar').fullCalendar('getyear'));
        } else {
            $('#calendar').fullCalendar('refetchEvents');
        }

        RefreshCalendarFilter();
    }

    function CloseCategoryFilter() {
        CloseDialogOverlay('WindowLargeModal');

        if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
            LoadEventListView(175, $('#calendar').fullCalendar('getmonth'), $('#calendar').fullCalendar('getyear'));
        } else {
            $('#calendar').fullCalendar('refetchEvents');
        }

        RefreshCategoryFilter();
    }

    function SelectFilteredCategories() {
        var arrValues = GetCookie('CategoryFilter').split('-');

        $.each(arrValues, function() {
            $('#categoryfilter-chk-category' + this).attr('checked', false);
        });
    }

    function UpdateCategoryFilter(id) {
        var strCategoryFilter = GetCookie('CategoryFilter');

        if ($('#categoryfilter-chk-category' + id).is(':checked')) {
            strCategoryFilter = strCategoryFilter.replace(id + '-', '');
        } else {
            strCategoryFilter = strCategoryFilter + id + '-';
        }

        SetCookie('CategoryFilter', strCategoryFilter, 365);
    }

    function toggleFilters() {
        if ($("#calendar-filter-wrapper").hasClass("open")) {
            $("#calendar-filter-wrapper").removeClass("open").addClass("closed");
            SlideUpControl('calendar-filter-wrapper');
            $("#calendar-pnl-filter-toggle-chevron").attr("src", "http://www.springfield.k12.or.us/Static/V2_16_01//GlobalAssets/Images/Icons/16/toggle-closed.png");
        } else {
            $("#calendar-filter-wrapper").removeClass("closed").addClass("open");
            SlideDownControl('calendar-filter-wrapper');
            $("#calendar-pnl-filter-toggle-chevron").attr("src", "http://www.springfield.k12.or.us/Static/V2_16_01//GlobalAssets/Images/Icons/16/toggle-open.png");
        }
    }

    function UpdateCalendarFollow() {
        var data = "{ModuleInstanceID: 175}";
        var success = 'ShowNotification("Success! You are now following this calendar in MyView.");';
        //var failure = 'CallControllerFailure(result[0].errormessage);';
        var failure = 'ShowNotification(result[0].errormessage);';
        
        CallController("http://www.springfield.k12.or.us//site/UserControls/Calendar/CalendarController.aspx/UpdateCalendarFollow", data, success, failure);
    }
', 

', 
', 
    
', 
	
', 
', 

    ', 
        ', Customize Calendar View', 

        ', 
        

        ', 
            ', 
                Calendars ',  ', 
            ', 
            ', 
		    ', 
		        ', Calendar', 
', 
', 
    $(document).ready(function() {
        // ADA click events
        $(".ui-calendarfilter-removefilter").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $(".ui-calendarfilter-addremove").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $(".ui-btn-toolbar").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });
    });
', 
		    ', 
        ', 
        
        ', 
            ', 
                Categories ',  ', 
            ', 
            ', 
            ', 
                ', u"$(document).ready(function() {$('.filter-display li').each(function() {adjustColour($(this));});});",  ', Unassigned',  ', Board Meeting', 
',  ', Budget Meeting', 
',  ', Collaboration Day - Early Release', 
',  ', Conference or Grading Day (No Students)', 
',  ', District Event', 
',  ', First and Last Day of School', 
',  ', Furlough Day - No School', 
',  ', Holiday - No School', 
',  ', No School', 
',  ', School Event', 
',  ', Sport Event', 
',  ', Spring Break', 
',  ', Springfield Education Foundation', 
',  ', Staff Development (No Students)', 
',  ', Winter Break', 
', 


', u"
    $(document).ready(function() {
        
        $('.ui-detail-overlay').detailoverlay();
    });
", 
', 
    $(document).ready(function() {
        // ADA click events
        $(".ui-calendarfilter-addremove").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $(".ui-btn-toolbar").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });
    });
', 
            ', 
        ', 

        ', 
        
        
		
		', 
            ', 
                ', 
                    ', Month Name Placeholder', 
                ', 
                ', 
			        ',  
				        ', 
                            
					        ', 
					        ', Export Events', 
				        ', 
			        ', 
				
                    ', 
                        ',  ',  ', 
                    ', 

                    ', 

                    
                    ', 
                        ',  ', Export', 
                    ', 

                    

			        ', 
                    ', Subscribe to RSS Feed', 
                    ', iCal Feed Instructions', 
                ', 
            ', 
		', 
            
        ', 
            ', 
                ', 
                    ', Today', 
                ', 
           
			    ', 
				    ', 
					    ', 
                            ',  ', Day', 
                        ', 
                        ', 
                            ',  ', Week', 
                        ', 
                        ', 
                            ',  ', Month', 
                        ', 
                        ', 
                            ',  ', List', 
                        ', 
				    ', 
			    ', 
            

                ', 
                    ', \u2039', 
			        ', Change Month', 
                    ', 
				        ', January', 
				        ', February', 
				        ', March', 
				        ', April', 
				        ', May', 
				        ', June', 
				        ', July', 
				        ', August', 
				        ', September', 
				        ', October', 
				        ', November', 
				        ', December', 
			        ', 
			
			        ', Change Year',  
			        ', 
			        ', 
			        ', 

			        ', \u203a', 
                ', 
            ', 

        ', 
    ', 
    
    ', 
        ', Calendar', 
        ', 
        ', 
            ', 
               ', 
            ', 
        ', 
        ', 
            ', 
            ', 
        ', 
        ', 
    ', 
    
    
    
', 
', 

', 
', 
', 
', 
', 
', 
', 
	', 
	', 
		', 
		', 
		', 
			', 
				', 
					', 
				', 
			', 
			', 
				', 
					', 
				', 
			', 
			', 
				', 
					', 
				', 
			', 
			', 
				© ', var currYear = new Date();document.write(currYear.getFullYear());',  Springfield Public Schools
			', 
			', 
				Springfield Public Schools
				', 
				525 Mill Street
				', 
				Springfield, OR 97477
				', 
				Phone: (541) 747-3331
			', 
		', 
	', 
', 
', 
', 
', 
', 
', 
', 
', 
', Questions or Feedback?',  | ', 
', Blackboard Web Community Manager Privacy Policy (Updated)',  | ', 
', Terms of Use', 
', 
', 
', Copyright © 2002-2017 Blackboard, Inc. All rights reserved.', 
', 
', 
', 
', 
', 
', 
', 
', u"
   $(document).ready(function(){
      var beaconURL='http://analytics.schoolwires.com/analytics.asmx/Insert?AccountNumber=%2buDJtb14ukA8GfX06UP%2b0Q%3d%3d&SessionID=d8b93623-c759-48f7-8b39-886de377f6be&SiteID=1&ChannelID=0&SectionID=0&PageID=2&HitDate=1%2f5%2f2017+4%3a27%3a39+AM&Browser=Unknown+0.0&OS=Unknown&IPAddress=117.192.201.51';
      try {
         $.getJSON(beaconURL + '&jsonp=?', function(myData) {});
      } catch(err) { 
         // prevent site error for analytics
      }
   });
", 

    ', 

    
    

    ', 

', u"
    $(document).ready(function() {
        $('#dialog-overlay-WindowMedium-base').appendTo('body');
 		
		
    });
", 
    ', 

', u"
    $(document).ready(function() {
        $('#dialog-overlay-WindowSmall-base').appendTo('body');
 		
		
    });
", 
    ', 

', u"
    $(document).ready(function() {
        $('#dialog-overlay-WindowLarge-base').appendTo('body');
 		
		
    });
", 

    ', 

', u"
    $(document).ready(function() {
        $('#dialog-overlay-WindowMediumModal-base').appendTo('body');
 		
		
    });
", 
    ', 

', u"
    $(document).ready(function() {
        $('#dialog-overlay-WindowSmallModal-base').appendTo('body');
 		
		
    });
", 
    ', 

', u"
    $(document).ready(function() {
        $('#dialog-overlay-WindowLargeModal-base').appendTo('body');
 		
		
    });
", 
    ', 

', u"
    $(document).ready(function() {
        $('#dialog-overlay-WindowXLargeModal-base').appendTo('body');
 		
		
    });
", 

    ', 

', u"
    $(document).ready(function() {
        $('#dialog-overlay-MyAccountSubscriptionOverlay-base').appendTo('body');
 		
		
    });
", 

    ', 

', u"
    $(document).ready(function() {
        $('#dialog-overlay-InsertOverlay-base').appendTo('body');
 		
		
    });
", 
    ', 

', u"
    $(document).ready(function() {
        $('#dialog-overlay-InsertOverlay2-base').appendTo('body');
 		
		
    });
", 
    
    ', 
    #videowrapper {
        position: fixed;
        z-index: 20000;
        background: rgba(0, 0, 0, 0.5) none repeat scroll 0% 0%;
        top: 0px;
        bottom: 0px;
        left: 0px;
        right: 0px;
    }
    #videodialog {
        position: absolute;
        top: 50px;
        left: 50px;
        right: 50px;
        background: #FFF none repeat scroll 0% 0%;
        z-index: 30000;
        box-shadow: 0px 0px 23px rgba(0, 0, 0, 0.65);
        box-sizing: border-box;
        border: 8px solid #FFF;
    }

    #videodialog .close-btn {
        position: absolute;
        top: 0px;
        right: 0px;
        padding: 0px 25px 0px 0px;
        color: #666;
        line-height: 1;
        font-family: "Trebuchet MS","Lucida Grande","Lucida Sans Unicode","Lucida Sans",Tahoma,sans-serif;
        font-size: 14px;
        cursor: pointer;
    }

    #videodialog .close-btn::after {
        content: "X";
        width: 16px;
        height: 16px;
        position: absolute;
        top: 50%;
        right: 0px;
        margin-top: -8px;
        background: #999 none repeat scroll 0% 0%;
        border-radius: 9px;
        color: #FFF;
        font-weight: bold;
        line-height: 16px;
        font-size: 9px;
        text-align: center;
    }
        #videodialog-video {
            margin-top:25px;
        }
    ', 
    ', 
        function resizeVideoIframe() {
            $("#videodialog-video iframe").css({ "width": "auto", "height": "auto" });
            var screenWidth = $(window).width();
            var screenHeight = $(window).height();
            //alert('screen width =' + screenWidth + '  screen height=' + screenHeight);
            var initVidW = 800, initVidH = 600;
            var vidRatio = initVidH / initVidW;
            var vidWidth = $("#videodialog-video").width();
            //alert('videoWidth = ' +vidWidth);
            var vidHeight = vidWidth * vidRatio;

            if ((vidHeight + 100) > screenHeight) {
                vidHeight = screenHeight - 140;
            }

            $("#videodialog-video").css({ "height": (vidHeight) });
            $("#videodialog-video iframe").css({ "width": vidWidth, "height": vidHeight }); 
        }

        function resizeVideo() {
            $("#videodialog-video video").css({ "width": "auto", "height": "auto" });
            var screenWidth = $(window).width();
            var screenHeight = $(window).height();
            //alert('screen width =' + screenWidth + '  screen height=' + screenHeight);
            var initVidW = 800, initVidH = 600;
            var vidRatio = initVidH / initVidW;
            var vidWidth = $("#videodialog-video").width();
            //alert('videoWidth = ' +vidWidth);
            var vidHeight = vidWidth * vidRatio;

            if ((vidHeight + 100) > screenHeight) {
                vidHeight = screenHeight - 140;
            }

            $("#videodialog-video").css({ "height": (vidHeight) });
            $("#videodialog-video video").css({ "width": vidWidth, "height": vidHeight });
            //$(".videoControl").css({ "bottom": $("#videodialog-video video").bottom() + 5, "width": 100 });
        }

        function closeVideoDialog() {
            $('#videowrapper').addClass('ui-helper-hidden');
            $('#videodialog-video').html('');
            $(window).resize(function () { });
        }
    ', 
    ', 
        ', 
            ', CLOSE', 
            ', 
        ', 
    ', 
    ', 

        $(document).ready(function () {

            removeBrokenImages();
            checkSidebar();
            RemoveCookie();

            $('.navigation li.collapsible').each(function () {
                if ($(this).find('ul').length == 0) {
                    $(this).removeClass('collapsible');
                }
            });

            // find page nav state cookie and add open chevron
            var arrValues = GetCookie('SWPageNavState').split('~');

            $.each(arrValues, function () {
                if (this != '') {
                    $('#' + this).addClass('collapsible').prepend("<div class='bullet collapsible' />");
                }
            });

            // find remaining sub menus and add closed chevron and close menu
            $('.navigation li > ul').each(function () {
                var list = $(this);

                if (list.parent().hasClass('active') && !list.parent().hasClass('collapsible')) {
                    // open sub for currently selected page                    
                    list.parent().addClass('collapsible').prepend("<div class='bullet collapsible' />");
                } else {
                    if (list.parent().hasClass('collapsible') && !list.siblings('div').hasClass('collapsible')) {
                        // open sub for page with auto expand
                        list.siblings('div.expandable').remove();
                        list.parent().prepend("<div class='bullet collapsible' />");
                    }
                }

                if (!list.siblings('div').hasClass('collapsible')) {
                    // keep all closed that aren't already set to open
                    list.parent().addClass('expandable').prepend("<div class='bullet expandable' />");
                    ClosePageSubMenu(list.parent());
                } else {
                    OpenPageSubMenu(list.parent());
                }
            });

            // remove bullet from hierarchy if no-bullet set
            $('.navigation li.collapsible').each(function () {
                if ($(this).hasClass('no-bullet')) {
                    if (!$(this).hasClass('navigationgroup')) { $(this).removeClass('collapsible'); }
                    $(this).children('div.collapsible').remove();
                }
            });

            $('.navigation li.expandable').each(function () {
                if ($(this).hasClass('no-bullet')) {
                    if (!$(this).hasClass('navigationgroup')) { $(this).removeClass('expandable'); }
                    $(this).children('div.expandable').remove();
                }
            });

            $('.navigation li:not(.collapsible,.expandable,.no-bullet)').each(function () {
                $(this).prepend("<div class='bullet' />");
            });

            $('.navigation li.active').parents('ul').each(function () {
                if (!$(this).hasClass('page-navigation')) {
                    OpenPageSubMenu($(this).parent());
                }
            });

            // set click event for chevron
            $(document).on('click', '.navigation div.collapsible', function () {
                ClosePageSubMenu($(this).parent());
            });

            $(document).on('click', '.navigation div.expandable', function () {
                OpenPageSubMenu($(this).parent());
            });

            // set navigation grouping links
            $(document).on('click', '.navigationgroup.collapsible > a', function () {
                ClosePageSubMenu($(this).parent());
            });

            $(document).on('click', '.navigationgroup.expandable > a', function () {
                OpenPageSubMenu($(this).parent());
            });

            //SW MYSTART DROPDOWNS
            $(document).on('click', '.sw-mystart-dropdown', function () {
                $(this).children(".sw-dropdown").css("display", "block");
            });

            $(".sw-mystart-dropdown").hover(function () { }, function () {
                $(this).children(".sw-dropdown").hide();
                $(this).blur();
            });

            //SW ACCOUNT DROPDOWN
            $(document).on('click', '#sw-mystart-account', function () {
                $(this).children("#sw-myaccount-list").show();
                $(this).addClass("clicked-state");
            });

            $("#sw-mystart-account, #sw-myaccount-list").hover(function () { }, function () {
                $(this).children("#sw-myaccount-list").hide();
                $(this).removeClass("clicked-state");
                $("#sw-myaccount").blur();
            });

            // set hover class for page and section navigation
            $('.ui-widget.app.pagenavigation, .ui-widget.app.sectionnavigation').find('li > a').hover(function () {
                $(this).addClass('hover');
            }, function () {
                $(this).removeClass('hover');
            });

            // set active class on channel and section
            var activeChannelNavType = $('input#hidActiveChannelNavType').val();
            if (activeChannelNavType == -1) {
                // homepage is active
                $('#navc-HP').addClass('active');
            } else if (activeChannelNavType == 1) {
                // calendar page is active
                $('#navc-CA').addClass('active');
            } else {
                // channel is active
                var activeSelectorID = $('input#hidActiveChannel').val();
                $('#navc-' + activeSelectorID).addClass('active');
                activeSelectorID = $('input#hidActiveSection').val();
                $('#navs-' + activeSelectorID).addClass('active');
            }
        }); // end document ready

        function OpenPageSubMenu(li) {
            if (li.prop('tagName').toLowerCase() == "li") {
                if (li.hasClass('expandable')) {
                    li.removeClass('expandable').addClass('collapsible');
                }
                if (li.find('div:first').hasClass('expandable')) {
                    li.find('div:first').removeClass('expandable').addClass('collapsible');
                }
                li.find('ul:first').show();

                PageNavigationStateCookie();
            }
        }

        function ClosePageSubMenu(li) {
            if (li.prop('tagName').toLowerCase() == "li") {
                li.removeClass('collapsible').addClass('expandable');
                li.find('div:first').removeClass('collapsible').addClass('expandable');
                li.find('ul:first').hide();

                PageNavigationStateCookie();
            }
        }

        function PageNavigationStateCookie() {
            var strCookie = "";

            $('.pagenavigation li > ul').each(function () {
                var item = $(this).parent('li');
                if (item.hasClass('collapsible') && !item.hasClass('no-bullet')) {
                    strCookie += $(this).parent().attr('id') + '~';
                }
            });

            SetCookie('SWPageNavState', strCookie);
        }

        function checkSidebar() {
            $(".ui-widget-sidebar").each(function () {
                if ($.trim($(this).html()) != "") {
                    $(this).show();
                    $(this).siblings(".ui-widget-detail").addClass("with-sidebar");
                }
            });
        }

        function removeBrokenImages() {
            //REMOVES ANY BROKEN IMAGES
            $("span.img img").each(function () {
                if ($(this).attr("src") !== undefined) {
                    $(this).parent().parent().show();
                    $(this).parent().parent().siblings().addClass("has-thumb");
                }
            });
        }

        function LoadEventDetailUE(moduleInstanceID, eventDateID, userRegID, isEdit) {
            (userRegID === undefined ? userRegID = 0 : '');
            (isEdit === undefined ? isEdit = false : '');
            OpenDialogOverlay("WindowMediumModal", { LoadType: "U", LoadURL: "http://www.springfield.k12.or.us//site/UserControls/Calendar/EventDetailWrapper.aspx?ModuleInstanceID=" + moduleInstanceID + "&EventDateID=" + eventDateID + "&UserRegID=" + userRegID + "&IsEdit=" + isEdit });
        }

        function RemoveCookie() {
            // There are no sub page            
            if ($('.pagenavigation li li').length == 0) {
                //return false;
                PageNavigationStateCookie();
            }
        }
    ', 

    ', 

        function AddOffCanvasMenuHeightForSiteNav() {
            var sitenavulHeight = 0;

            if ($('#sw-pg-sitenav-ul').length > 0) {
                sitenavulHeight = parseInt($("#sw-pg-sitenav-ul").height());
            }

            var swinnerwrapHeight = 0;

            if ($('#sw-inner-wrap').length > 0) {
                swinnerwrapHeight = parseInt($("#sw-inner-wrap").height());
            }

            // 360px is abount 5 li height
            if (sitenavulHeight + 360 >= swinnerwrapHeight) {
                $("#sw-inner-wrap").height(sitenavulHeight + 360);
            }
        }

        function AddOffCanvasMenuHeightForSelectSchool() {
            var selectschoolulHeight = 0;

            if ($('#sw-pg-selectschool-ul').length > 0) {
                selectschoolulHeight = parseInt($("#sw-pg-selectschool-ul").height());
            }

            var swinnerwrapHeight = 0;

            if ($('#sw-inner-wrap').length > 0) {
                swinnerwrapHeight = parseInt($("#sw-inner-wrap").height());
            }

            // 360px is abount 5 li height
            if (selectschoolulHeight + 360 >= swinnerwrapHeight) {
                $("#sw-inner-wrap").height(selectschoolulHeight + 360);
            }
        }

        $(document).ready(function () {
            if ($("#sw-pg-sitenav-a").length > 0) {
                $(document).on('click', '#sw-pg-sitenav-a', function () {
                    if ($("#sw-pg-sitenav-ul").hasClass('sw-pgmenu-closed')) {
                        AddOffCanvasMenuHeightForSiteNav();

                        $("ul.sw-pgmenu-toplevel").removeClass('sw-pgmenu-open').addClass('sw-pgmenu-closed');
                        $("#sw-pg-sitenav-ul").removeClass('sw-pgmenu-closed');
                        $("#sw-pg-sitenav-ul").addClass('sw-pgmenu-open');
                    } else {
                        $("#sw-pg-sitenav-ul").removeClass('sw-pgmenu-open');
                        $("#sw-pg-sitenav-ul").addClass('sw-pgmenu-closed');
                    }
                });

                $(document).on('click', '#sw-pg-selectschool-a', function () {
                    if ($("#sw-pg-selectschool-ul").hasClass('sw-pgmenu-closed')) {
                        AddOffCanvasMenuHeightForSelectSchool();

                        $("ul.sw-pgmenu-toplevel").removeClass('sw-pgmenu-open').addClass('sw-pgmenu-closed');
                        $("#sw-pg-selectschool-ul").removeClass('sw-pgmenu-closed');
                        $("#sw-pg-selectschool-ul").addClass('sw-pgmenu-open');
                    } else {
                        $("#sw-pg-selectschool-ul").removeClass('sw-pgmenu-open');
                        $("#sw-pg-selectschool-ul").addClass('sw-pgmenu-closed');
                    }
                });

                $(document).on('click', '#sw-pg-myaccount-a', function () {
                    if ($("#sw-pg-myaccount-ul").hasClass('sw-pgmenu-closed')) {
                        $("ul.sw-pgmenu-toplevel").removeClass('sw-pgmenu-open').addClass('sw-pgmenu-closed');
                        $("#sw-pg-myaccount-ul").removeClass('sw-pgmenu-closed');
                        $("#sw-pg-myaccount-ul").addClass('sw-pgmenu-open');
                    } else {
                        $("#sw-pg-myaccount-ul").removeClass('sw-pgmenu-open');
                        $("#sw-pg-myaccount-ul").addClass('sw-pgmenu-closed');
                    }
                });

                $(document).on('click', '.pg-list-bullet', function () {
                    $(this).prev().toggle();

                    if ($(this).hasClass('closed')) {
                        AddOffCanvasMenuHeightForSiteNav();

                        $(this).removeClass('closed');
                        $(this).addClass('open');
                    } else {
                        $(this).removeClass('open');
                        $(this).addClass('closed');
                    }
                });

                $(document).on('mouseover', '#sw-pg-selectschool', function () {
                    $("#sw-pg-selectschool-firstli").removeClass('sw-pg-selectschool-firstli-mouseout').addClass('sw-pg-selectschool-firstli-mouseover');
                    $("#sw-pg-selectschool-firstli a").addClass('sw-pg-selectschool-firstli-a-mouseover').removeClass('sw-pg-selectschool-firstli-a-mouseout');
                });

                $(document).on('mouseout', '#sw-pg-selectschool', function () {
                    $("#sw-pg-selectschool-firstli").removeClass('sw-pg-selectschool-firstli-mouseover').addClass('sw-pg-selectschool-firstli-mouseout');
                    $("#sw-pg-selectschool-firstli a").addClass('sw-pg-selectschool-firstli-a-mouseout').removeClass('sw-pg-selectschool-firstli-a-mouseover');
                });

                $(document).on('mouseover', '#sw-pg-myaccount', function () {
                    $("#sw-pg-myaccount-firstli").removeClass('sw-pg-myaccount-firstli-mouseout').addClass('sw-pg-myaccount-firstli-mouseover');
                    $("#sw-pg-myaccount-firstli a").addClass('sw-pg-myaccount-firstli-a-mouseover').removeClass('sw-pg-myaccount-firstli-a-mouseout');
                });

                $(document).on('mouseout', '#sw-pg-myaccount', function () {
                    $("#sw-pg-myaccount-firstli").removeClass('sw-pg-myaccount-firstli-mouseover').addClass('sw-pg-myaccount-firstli-mouseout');
                    $("#sw-pg-myaccount-firstli a").addClass('sw-pg-myaccount-firstli-a-mouseout').removeClass('sw-pg-myaccount-firstli-a-mouseover');
                });

                $(document).on('mouseover', '#sw-pg-sitenav', function () {
                    $("#sw-pg-sitenav-firstli").removeClass('sw-pg-sitenav-firstli-mouseout').addClass('sw-pg-sitenav-firstli-mouseover');
                    $("#sw-pg-sitenav-firstli a").addClass('sw-pg-sitenav-firstli-a-mouseover').removeClass('sw-pg-sitenav-firstli-a-mouseout');
                });

                $(document).on('mouseout', '#sw-pg-sitenav', function () {
                    $("#sw-pg-sitenav-firstli").removeClass('sw-pg-sitenav-firstli-mouseover').addClass('sw-pg-sitenav-firstli-mouseout');
                    $("#sw-pg-sitenav-firstli a").addClass('sw-pg-sitenav-firstli-a-mouseout').removeClass('sw-pg-sitenav-firstli-a-mouseover');
                });

                $(document).on('mouseover', '#sw-pg-district', function () {
                    $("#sw-pg-district-firstli").removeClass('sw-pg-district-firstli-mouseout').addClass('sw-pg-district-firstli-mouseover');
                    $("#sw-pg-district-firstli a").addClass('sw-pg-district-firstli-a-mouseover').removeClass('sw-pg-district-firstli-a-mouseout');
                });

                $(document).on('mouseout', '#sw-pg-district', function () {
                    $("#sw-pg-district-firstli").removeClass('sw-pg-district-firstli-mouseover').addClass('sw-pg-district-firstli-mouseout');
                    $("#sw-pg-district-firstli a").addClass('sw-pg-district-firstli-a-mouseout').removeClass('sw-pg-district-firstli-a-mouseover');
                });
            }
        });


    ', 
    
    ', 
    ', 
    ', 
    ', 
    ', 
    ', 

    ', 
  ', 
  ', 
', 


    ', 

    

    ', 
    

'][

    ', 
    ', 
    ', 
    ', 

    ', 
    ', 
    ', 

    ', 
    ', 
        ', Skip to Main Content', 
    ', 

    ', 
    
    ', 

    ', 
    

    

', u"
	/* SPECIAL MODE BAR */
	div.sw-special-mode-bar {
		background: #FBC243 url('http://www.springfield.k12.or.us/Static/V2_16_01//GlobalAssets/Images/special-mode-bar-background.png') no-repeat;
		height: 30px;
		text-align: left;
		font-size: 12px;
		position: relative;
		z-index: 10000;
	}
	div.sw-special-mode-bar > div {
		padding: 8px 0 0 55px;
		font-weight: bold;
	}
	div.sw-special-mode-bar > div > a {
		margin-left: 20px;
		background: #A0803D;
		-moz-border-radius: 5px;
		-webkit-border-radius: 5px;
		color: #fff;
		padding: 4px 6px 4px 6px;
		font-size: 11px;
	}
	
	body.blue div.sw-special-mode-bar, body.green div.sw-special-mode-bar, body.red div.sw-special-mode-bar {
	    display: none;
	}

	/* END SPECIAL MODE BAR */
", 

', 
	
	function SWEndPreviewMode() { 
		var data = "{}";
		var success = "window.location='';";
		var failure = "CallControllerFailure(result[0].errormessage);";
		CallController("http://www.springfield.k12.or.us/site/SiteController.aspx/EndPreviewMode", data, success, failure);
	}
	
	function SWEndEmulationMode() {
		SetUnescapedCookie('UserID', GetCookie('SourceEmulationUserID'));
		DeleteCookie('SourceEmulationUserID');
		window.location = 'http://www.springfield.k12.or.us/ums/Users/Users.aspx';
	}

	function SWEndPreviewConfigMode() {
	    var data = "{}";
	    var success = "window.location='';";
	    var failure = "CallControllerFailure(result[0].errormessage);";
	    CallController("http://www.springfield.k12.or.us/site/SiteController.aspx/EndPreviewConfigMode", data, success, failure);
	}
', 
            

    ', 
', 
', 
', 
', District Home', 
', 
', 
', 
', Sign In', 
', 
', 
$(document).ready(function() {
    $('#sw-search-input').keyup(function(e) {        if (e.keyCode == 13) {
            SWGoToSearchResultsPageswsearchinput();
        }
    });
    $('#sw-search-input').val($('#swsearch-hid-word').val())});
function SWGoToSearchResultsPageswsearchinput() {
window.location.href="http://www.springfield.k12.or.us/site/Default.aspx?PageType=6&SiteID=1&SearchString=" + $('#sw-search-input').val();
}
', 
', 
', 
', 
', 
', 
', 
', 
', 
', 
	', 
		', 
			', 
				', 
				', 
				', 
				', 
				', 
				', 
				', Site Map',  

				', 
				', 
				', 
				', 
				', 
				', 
			', 
			', 
				', 
				', 
				', 
					Home >  > 
				', 
			', 
			', 
				', 
', 
', Home', 
', 
', 
', Our District', 
', 
', About Us', 
', Contacts', 
', Leadership and Board', 
', District Initiatives', 
', Programs and Services', 
', Springfield Education Foundation', 
', Springfield Success!', 
', 
', 
', 
', Schools', 
', 
', Our Schools', 
', Preschool', 
', Elementary Schools', 
', Middle Schools', 
', High Schools', 
', Charter Schools', 
', SPS Online', 
', School Library Info', 
', 
', 
', 
', Departments', 
', 
', Departments Overview', 
', Superintendent', 
', Business Operations', 
', Communications', 
', Facilities', 
', Health Services', 
', Human Resources', 
', Instruction', 
', Nutrition Services', 
', Print and Design Services', 
', Technology Services', 
', Transportation', 
', 
', 
', 
', Community', 
', 
', Our Community', 
', Demographics', 
', Informational Resources', 
', Legislative Contacts', 
', TEAM Springfield', 
', Volunteer Opportunities', 
', 
', 
', 
', User Groups', 
', 
', What Are User Groups?', 
', Students', 
', Parents', 
', SPS Staff', 
', 
', 
', 
', News', 
', 
', Press Room', 
', Headlines', 
', Social Media', 
', News Releases', 
', SPS in the News', 
', Publications/Multimedia', 
', School Delays/Closures', 
', 
', 
', 
', Calendars', 
', 
', Calendar Options', 
', District Academic Calendar', 
', Board Meeting Calendar', 
', Online District Event Calendar', 
', SHS School Calendar', 
', THS School Calendar', 
', A3 School Calendar', 
', WLA Middle School Calendar', 
', WLA High School Calendar', 
', 
', 
', 
', Español', 
', 
', ¿Qué hay de nuevo?', 
', Información de Contacto', 
', Inscribir a Su Hijo en el Kinder', 
', Informacíon Sobre Requisitos de Prueba de Dirección de Casa', 
', Información Sobre Nuestro Distrito y Nuestras Escuelas', 
', Transferencias a Nuestro Distrito Escolar', 
', Politica de Transferencias Dentro del Distrito', 
', Calendario Escolar', 
', Doble Inmersión Lingüística en Guy Lee', 
', El Desarrollo del Idioma Inglés (ELD)', 
', En Caso de Mal Tiempo', 
', Estándares Estatales Básicos Comunes', 
', Información Sobre la Medida', 
', Los Reportes del Estado', 
', Nuestra Visión y Misión', 
', More', 
', 
', 
', 



', 
    $(document).ready(function() {
        channelHoverIE();
        channelTouch();
    });

    function channelTouch() {
        // this will change the dropdown behavior when it is touched vs clicked.
        // channels will be clickable on second click. first click simply opens the menu.
        $('#channel-navigation > .sw-channel-item > a').on({
            'touchstart': function (e) {
                
                // see if has menu
                if ($(this).siblings('ul.sw-channel-dropdown').length > 0) {
                    var button = $(this);

                    // add href as property if not already set
                    // then remove href attribute
                    if (!button.prop('linkHref')) {
                        button.prop('linkHref', button.attr('href'));
                        button.removeAttr('href');
                    }

                    // check to see if menu is already open
                    if ($(this).siblings('ul.sw-channel-dropdown').is(':visible')) {
                        // if open go to link
                        window.location.href = button.prop('linkHref');
                    } 

                } 
            }
        });
    }


    
    function channelHoverIE(){
		// set z-index for IE7
		var parentZindex = $('#channel-navigation').parents('div:first').css('z-index');
		var zindex = (parentZindex > 0 ? parentZindex : 8000);
		$(".sw-channel-item").each(function(ind) {
			$(this).css('z-index', zindex - ind);
			zindex --;
		});
	    $(".sw-channel-item").hover(function(){
	        var subList = $(this).children('ul');
	        if ($.trim(subList.html()) !== "") {
		        subList.show();
		    }
		    $(this).addClass("hover");
	    }, function(){
		    $(".sw-channel-dropdown").hide();
		    $(this).removeClass("hover");
	    });
    }

', 


			', 
		', 
	', 
	', 
		', 
', 
', 

', u"
	span.fc-event-title.ellipsis {
		-moz-binding: url('http://www.springfield.k12.or.us//cms/Module/Calendar/ellipsis.xml#ellipsis');
	}
	
	#calendar-pnl-toolbar select {
	    margin: 0 0 10px 0;
	}
", 

', 
', 
', 
    eventDateID = 0;
    currentMonth = 0;
    currentYear = 0;

    $(document).ready(function() {		   
        // ADA click events
        $("#calendar-pnl-filter-toggle a").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $("#calendar-btn-print").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $("#A1").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $("#calendar-btn-calendarfollow").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $("#calendar-btn-icalfed").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $("#calendar-btn-change-today").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $("#calendar-btn-change-day").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $("#calendar-btn-change-week").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $("#calendar-btn-change-month").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $("#ui-btn-calendarlist-list").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $("#ui-btn-calendarlist-back").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $("#ui-btn-calendarlist-forward").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $(".calendar-filter-btn").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $(".category-filter-btn").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $(document).on('click', '.ui-datepicker-calendar td a', function() {
            fixADA();
        });

        $(document).on('click', '.ui-datepicker-calendar td a', function() {
            fixADA();
        });

		// Don't show the sidebar if the width is not greater than 900 px.
	    var intCalendarWidth = $("#calendar-pnl-calendarcontainer").width();

		if (intCalendarWidth < 900 ) {
			$("#calendar-pnl-smcalendar").addClass('ui-helper-hidden')
		}
			
		var thisYear = new Date().getFullYear();

	    $('#calendarlist-year').append('<option value="' + (thisYear - 1) + '">' + (thisYear - 1) + '</option>')
				.append('<option selected="selected" value="' + thisYear + '">' + (thisYear) + '</option>')
	            .append('<option value="' + (thisYear + 1) + '">' + (thisYear + 1) + '</option>')
	            .append('<option value="' + (thisYear + 2) + '">' + (thisYear + 2) + '</option>')
	            .append('<option value="' + (thisYear + 3) + '">' + (thisYear + 3) + '</option>')
	            .append('<option value="' + (thisYear + 4) + '">' + (thisYear + 4) + '</option>')
	            .append('<option value="' + (thisYear + 5) + '">' + (thisYear + 5) + '</option>')
	            .append('<option value="' + (thisYear + 6) + '">' + (thisYear + 6) + '</option>')
	            .append('<option value="' + (thisYear + 7) + '">' + (thisYear + 7) + '</option>');
	    
	    var thisMonth;
	    //if (eventDateID > 0) {
	    //	thisMonth = 0;
	    //} else {
	    	thisMonth = new Date().getMonth();
	    //}

	    $('#calendarlist-month').val(thisMonth + 1).change();

	    //function LoadEventPrint() {	
        //		var view = $('#calendar').fullCalendar('getView');
    //		var month = $('#calendar').fullCalendar('getmonth');
//		var date = $('#calendar').fullCalendar('getdate');
//		var year = $('#calendar').fullCalendar('getyear');
//		if(!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')){
//			view = "list";
//			month = $('#calendarlist-month').val() - 1;
//            year = $('#calendarlist-year').val();
//		} 
//		
//OpenWindow('http://www.springfield.k12.or.us//site/UserControls/Calendar/CalendarPrint.aspx?ModuleInstanceID=175&PageID=2&Date=' + date + '&Month=' + month + '&Year=' + year + '&View=' + view, 'PrintCalendar', 'width=' + (screen.width - 100) + ',height=' + (screen.height - 100) + ',menubar=yes');
	    // }

        //remove extra datepicker div that gets added into footer
	    if ($('#ui-datepicker-div').length){
	        $('#ui-datepicker-div').hide();
	    }

        $('#calendar').fullCalendar({
	        editable: false,
	        header: {
	            left: '',
	            center: 'title',
	            right: ''
	        },
            month: new Date().getMonth(),
            date: new Date().getDate(),
            year: new Date().getFullYear(),
            defaultView: 'month',
	        weekMode: 'liquid',
	        timeFormat: 'h:mmtt',
	        events: function(start, end, callback) {
                $.ajax({
                    type: "POST",
                    url: "http://www.springfield.k12.or.us//site/UserControls/Calendar/CalendarController.aspx/GetEvents",
                    data: "{ModuleInstanceID: 175, " +
                                "StartDate: '" + (parseInt(start.getMonth()) + 1) + "/" + start.getDate() + "/" + start.getFullYear() +  "', " +
                                "EndDate: '" + (parseInt(end.getMonth()) + 1) + "/" + end.getDate() + "/" + end.getFullYear() + "'}", 
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    cache: false,
                    success: function(result) { 
                        var calevents = eval(result.d);
	                    callback(calevents);
						$('.fc-event-title').addClass('ellipsis');
                    }
                });
	        }, 
	        eventClick: function(calEvent, jsEvent, view) {
	            if ($(this).hasClass('fc-event-more')) {
	                $('#calendar').find('td.fc-active-day').removeClass('fc-active-day');

	                // get weekday and date
	                var dayClass;
	                var dateClass = 'fc-day' + (calEvent.start.getDate() - 1);

	                switch (calEvent.start.getDay()) {
	                    case 0:
	                        dayClass = 'fc-sun';
	                        break;
	                    case 1:
	                        dayClass = 'fc-mon';
	                        break;
	                    case 2: 
	                        dayClass = 'fc-tue';
	                        break;
	                    case 3:
	                        dayClass = 'fc-wed';
	                        break;
	                    case 4:
	                        dayClass = 'fc-th;
	                        break;
	                    case 5:
	                        dayClass = 'fc-fri';
	                        break;
	                    case 6:
	                        dayClass = 'fc-sat';
	                        break;
	                }

	                $('td.' + dayClass + '.' + dateClass).addClass('fc-active-day').attr('m', calEvent.start.getMonth()).attr('d', calEvent.start.getDate()).attr('y', calEvent.start.getFullYear());
	                ChangeView('basicDay', calEvent.start);
	            } else {
                    LoadEventDetail(calEvent.id);
	            }
	        },
	        eventMouseover: function(calEvent, jsEvent, view) {
	            ShowEventOverlay(this, calEvent.id, calEvent.eventid, calEvent.recurringevent, calEvent.title, calEvent.start, calEvent.end, calEvent.noendtime);
	        },
	        eventMouseout: function() {
	            $('#calendar-event-overlay').remove();
	        },
	        dayClick: function(dayDate, allDay, jsEvent, view) {
	            // highlight the day and set it to active
	            $('#calendar').find('td.fc-active-day').removeClass('fc-active-day');
	            $(this).addClass('fc-active-day').attr('m', dayDate.getMonth()).attr('d', dayDate.getDate()).attr('y', dayDate.getFullYear());
	        },
	        dayRender: function(date, cell) {
	            cell.bind('dblclick', function() {
	                $('#calendar').fullCalendar('changeView', 'basicDay');
	                $('#calendar').fullCalendar('gotoDate', date);
	            });
	        },
	        viewDisplay: function(view) {
	            var startDate = new Date();
	            var endDate = new Date();

	            startDate = view.start;
	            endDate = view.end;

	            var view = $('#calendar').fullCalendar('getView');
	                
	            // if month view, save month
	            if (view.name == 'month') {
	                var d = $('#calendar').fullCalendar('getDate');
                    
	                currentMonth = $.fullCalendar.formatDate(d, 'M');
	                currentYear = $.fullCalendar.formatDate(d, 'yyyy');

	                currentMonth = currentMonth - 1;

	                /*currentMonth = $('#calendar').fullCalendar('getmonth');
	                currentYear = $('#calendar').fullCalendar('getyear');*/

	                $('#calendarlist-month').val(currentMonth + 1);
	                ChangeYearDropDown(currentYear);
                    $("#calendar-pnl-title h1").text(getFullMonth(currentMonth + 1) + " " + currentYear);
	            } else if (view.name == 'basicWeek') {
                    // select day
                    if ('' == 'basicWeek') {
                        var curdate = new Date(0, 0, 0);
                        var dateClass = 'fc-day' + curdate.getDay();
                        $('td.' + dateClass).addClass('fc-active-day').attr('m', curdate.getMonth()).attr('d', curdate.getDate()).attr('y', curdate.getFullYear());
                    }

	                // first see if week falls inside same month
	                if (startDate.getMonth() == endDate.getMonth()) {
	                    $('#calendarlist-month').val(startDate.getMonth() + 1);
	                    ChangeYearDropDown(startDate.getFullYear());
                        $("#calendar-pnl-title h1").text(getFullMonth(startDate.getMonth() + 1) + " " + startDate.getFullYear());
	                } else {
	                    // see if part of original month still shows
	                    if ((startDate.getMonth() == currentMonth && startDate.getFullYear() == currentYear) || (endDate.getMonth() == currentMonth && endDate.getFullYear() == currentYear)) {
	                         $('#calendarlist-month').val(currentMonth + 1);
	                         ChangeYearDropDown(currentYear);
                             $("#calendar-pnl-title h1").text(getFullMonth(currentMonth + 1) + " " + currentYear);
	                    } else {
	                        // moved away from that month, see which month covers more area
	                        if (endDate.Date < 3) {
	                            $('#calendarlist-month').val(endDate.getMonth() + 1);
	                            ChangeYearDropDown(endDate.getFullYear());
                                $("#calendar-pnl-title h1").text(getFullMonth(endDate.getMonth() + 1) + " " + endDate.getFullYear());
	                        } else {
	                            $('#calendarlist-month').val(startDate.getMonth() + 1);
	                            ChangeYearDropDown(startDate.getFullYear());
                                $("#calendar-pnl-title h1").text(getFullMonth(startDate.getMonth() + 1) + " " + startDate.getFullYear());
	                        }
	                    }
	                }
	            } else if (view.name == 'basicDay') {
	                $('#calendarlist-month').val(startDate.getMonth() + 1);
	                ChangeYearDropDown(startDate.getFullYear());
                    $("#calendar-pnl-title h1").text(getFullMonth(startDate.getMonth() + 1) + " " + startDate.getFullYear());
	            }
	            
	           //alert('finished - dropdown says ' + $('#calendarlist-month').val() + ', calendar says ' + $('#calendar').fullCalendar('getmonth'));
	            
				if (!$('#calendar-pnl-smcalendar').hasClass('ui-helper-hidden')) {
				    var d = $('#calendar').fullCalendar('getDate');
                    
				    var myMonth = $.fullCalendar.formatDate(d, 'M');
				    var myYear = $.fullCalendar.formatDate(d, 'yyyy');

				    myMonth = myMonth - 1;

				    $('#small-calendar-1').datepicker('setDate', new Date(myYear, myMonth));
				}

				// set toggle button classes
				$('#calendarview-toggle a').removeClass('active');

				switch (view.name) {
					case 'month':
						$('#calendarview-toggle a.month').addClass('active');
						break;
					case 'basicWeek':
						$('#calendarview-toggle a.week').addClass('active');
						break;
					case 'basicDay':
						$('#calendarview-toggle a.day').addClass('active');
						break;
				}
	        },
            eventRender: function(event, eventElement) {
                var view = $('#calendar').fullCalendar('getView');

                eventElement.attr('tabIndex', 0);

                eventElement.css("backgroundColor", event.CategoryColor);
                eventElement.css("borderColor", event.CategoryColor);

                eventElement.keydown(function(e) {
                    e.stopImmediatePropagation();

                    if (e.keyCode == 13) {
                        LoadEventDetail(event.id);
                    }
                });

                adjustColour(eventElement);

                if (event.nativeevent == 0) {
                    eventElement.addClass('calendarevent-locked');
                } else if (event.registration.toLowerCase() == "true") {
                    eventElement.addClass('calendarevent-register');
                } else if (event.mandatory.toLowerCase() == "true") {
                    eventElement.addClass('calendarevent-mandatory');
                }

                // check for dates to display that are spanning and in current month only
                // hide all single day events that don't fall in current month
                if (view.name == "month") {
                    var d = $('#calendar').fullCalendar('getDate');
                    var currentMonth = $.fullCalendar.formatDate(d, 'M');

                    var eventStartYear = $.fullCalendar.formatDate(event.start, "yyyy");
                    var eventEndYear = $.fullCalendar.formatDate(event.end, "yyyy");

                    var eventStartMonth = $.fullCalendar.formatDate(event.start, "M");
                    var eventEndMonth = $.fullCalendar.formatDate(event.end, "M");

                    if (eventEndYear == eventStartYear) {
                        if (eventStartMonth != currentMonth) {
                            /*if (event.start.getDate() - event.end.getDate() == 0) {
                                eventElement.addClass("ui-helper-hidden");
                            }*/

                            if ((parseInt(eventStartMonth, 10) > parseInt(currentMonth, 10)) || (parseInt(eventEndMonth, 10) < parseInt(currentMonth, 10))) {
                                eventElement.addClass("ui-helper-hidden");
                            }
                        }
                    }
                }
	        }
        });

        // set up small calendars
        $('#small-calendar-1').datepicker({ 
            dayNamesMin: ['', '', '', '', '', '', ''],
            numberOfMonths: [3, 1],
            monthNames: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
            onSelect: function(dateText, inst) { 
                var myDate = new Date(dateText);

                $('#calendar').fullCalendar('changeView', 'basicDay');
                $('#calendar').fullCalendar('gotoDate', myDate);
            }
        });
        
        $(document).on('click', '#calendar-tbl-calendars .ui-datepicker-title', function() {
            var tempMonth = $.trim($(this).text()).substring(0, 3);
            var myMonth = 0;
            var myYear = $.trim($(this).text()).substring(3);

            switch (tempMonth.toLowerCase()) {
                case 'jan':
                    myMonth = 0;
                    break;
                 case 'feb':
                    myMonth = 1;
                    break;
                 case 'mar':
                    myMonth = 2;
                    break;
                 case 'apr':
                    myMonth = 3;
                    break;
                 case 'may':
                    myMonth = 4;
                    break;
                 case 'jun':
                    myMonth = 5;
                    break;
                 case 'jul':
                    myMonth = 6;
                    break;
                 case 'aug':
                    myMonth = 7;
                    break;
                 case 'sep':
                    myMonth = 8;
                    break;
                 case 'oct':
                    myMonth = 9;
                    break;
                 case 'nov':
                    myMonth = 10;
                    break;
                 case 'dec':
                    myMonth = 11;
                    break;
            }

            var myDate = new Date(parseInt(myYear), parseInt(myMonth));// parseInt necessary for safari

            $('#calendar').fullCalendar('changeView', 'month');
            $('#calendar').fullCalendar('gotoDate', myDate);
            
            if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
                myMonth = myMonth + 1;
                                
                $('#calendarlist-month').val(myMonth).change();
                $('#calendarlist-year').val($.trim(myYear)).change();
                
                if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
                    LoadEventListView(175, myMonth, myYear);
                }

                if (!$('#calendar-pnl-smcalendar').hasClass('ui-helper-hidden')) {
					    $('#small-calendar-1').datepicker('setDate', new Date(myYear, myMonth - 1));
				}
			}
        });
        
	    $(document).on('click', '#calendar-btn-myevents', function() {
            OpenDialogOverlay("WindowLargeModal", { LoadType: "U", LoadURL: "http://www.springfield.k12.or.us//site/UserControls/Calendar/MyEventsWrapper.aspx?ModuleInstanceID=175" });
        });

	    $(document).on('click', '#calendar-btn-legend', function() {
            OpenDialogOverlay("WindowMediumModal", { LoadType: "U", LoadURL: "http://www.springfield.k12.or.us//site/UserControls/Calendar/CategoryLegendWrapper.aspx?ModuleInstanceID=175" });
        });
        
	    $(document).on('click', '#eventexport-btn-save', function() {
		   $('#calendarexport-pnl-detail').validate({ onSuccess: EventDetailExportByDateRange });
		});
       
        if ('' == 'list') {
            LoadEventListView(175, 0, 0);
        }
        
	    $(document).on('click', '#myeventslist-btn-filter', function() {
            $('#myeventslist-pnl-toolbar').validate({ onSuccess: SearchMyEvents });
        });
        
	    $(document).on('change', '#calendarlist-month, #calendarlist-year', function() {
            $("#calendar-pnl-title h1").text(getFullMonth($('#calendarlist-month').val()) + " " + $('#calendarlist-year').val());
	    });

	    $('#calendar').fullCalendar('render');

        // remove table header for ADA compliance
        // add tabindex for table cells
	    fixADA();
   }); // end document ready
   
    function fixADA() {
        $(".ui-datepicker-calendar thead").remove();
        $(".ui-datepicker-calendar td").attr("tabindex", 0);
    }

    function ChangeYearDropDown(year) {
        if ( year < parseInt($('#calendarlist-year option:first').val())) {
            $('<option value="' + year + '">' + year + '</option>').insertBefore("#calendarlist-year option:first");
        } else if (year > parseInt($('#calendarlist-year option:last').val())) {
            $("#calendarlist-year").append('<option value="' + year + '">' + year + '</option>');
        }
    
        $('#calendarlist-year').val(year);
    }

	function ChangeView(type, eDate) {
        if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {                    
            $('#calendarlist-pnl-specialview').addClass('ui-helper-hidden');
            $('#calendar').removeClass('ui-helper-hidden');
            setTimeout("$('#calendar').fullCalendar('refetchEvents');", 500);
        }

        if (eDate !== undefined) { // clicked 'more' link
            var gotoDate = new Date(eDate.getFullYear(), eDate.getMonth(), eDate.getDate());

            $('#calendar').fullCalendar('gotoDate', gotoDate);
            $('#calendar').fullCalendar('changeView', type);
        } else if ($('#calendar').find('.fc-active-day').length > 0) { // active day
			var activeDay = $('td.fc-active-day');
			var gotoDate = new Date(activeDay.attr('y'), activeDay.attr('m'), activeDay.attr('d'));

			$('#calendar').fullCalendar('gotoDate', gotoDate);
            $('#calendar').fullCalendar('changeView', type);
        } else { // go to view w/o changing
            var gotoDate = new Date($('#calendarlist-year').val(), ($('#calendarlist-month').val() - 1), 1);
            $('#calendar').fullCalendar('gotoDate', gotoDate);
            $('#calendar').fullCalendar('changeView', type);
        }

	    // remove table header for ADA compliance
	    // add tabindex for table cells
        fixADA();
    }
	
	function LoadEventDetail(eventDateID, userRegID, isEdit) {
	    (userRegID === undefined ? userRegID = 0 : '');
	    (isEdit === undefined ? isEdit = false : '');
	   
        var isListView = !$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')
        var currentView = $('#calendar').fullCalendar('getView');

        if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
            currentView = 'list';
        } else {
            currentView = currentView.name;
        }

        /*var currentDate = $('#calendar').fullCalendar('getdate');
        var currentMonth = $('#calendar').fullCalendar('getmonth');
        var currentYear = $('#calendar').fullCalendar('getyear');*/

        var currentDate = $('#calendar').fullCalendar('getDate');
        var currentMonth = $.fullCalendar.formatDate(currentDate, 'M');
        var currentYear = $.fullCalendar.formatDate(currentDate, 'yyyy');

        currentMonth = currentMonth - 1;

        parent.location.href = "http://www.springfield.k12.or.us//site/Default.aspx?PageID=2&PageType=17&DomainID=1&ModuleInstanceID=175&EventDateID=" + eventDateID + "&CurrentView=" + currentView; //"&UserRegID=" + userRegID + "&IsEdit=" + isEdit;
    }
	
	function ShowEventOverlay(obj, eventDateID, eventID, recurring, title, start, end, noEndTime) {
        $this = $(obj);
        $('#calendar-event-overlay').remove();

        // get date for display
		var startDate = (start.getMonth() + 1) + '/' + start.getDate() + '/' + start.getFullYear();
		var endDate = "";
	    //if (end !== null) {
		    endDate = (end.getMonth() + 1) + '/' + end.getDate() + '/' + end.getFullYear();
        //} else endDate = startDate;
		
		var strDate = "";
		var allDay = false;
		//var noEndTime = false;
		
		// get times
		var startHour = start.getHours().toString();
		var startMinute = start.getMinutes().toString();

		var startTime = (startHour < 12 ? (startHour.length == 2 ? startHour : (startHour == "0" ? "12" : "0" + startHour)) + ":" + (startMinute.length == 2 ? startMinute : "0" + startMinute) + " am" : ((startHour - 12).toString().length == 2 ? startHour - 12 : (startHour - 12 == 0 ? "12" : "0" + (startHour - 12))) + ":" + (startMinute.length == 2 ? startMinute : "0" + startMinute) + " pm");
		
		var endHour = "";
		var endMinute = "";

	    if (end !== null) {
		    endHour = end.getHours().toString();
		    endMinute = end.getMinutes().toString();
	    } else {
		    endHour = "00";
		    endMinute = "00";
	    }

        var endTime = (endHour < 12 ? (endHour.length == 2 ? endHour : "0" + endHour) + ":" + (endMinute.length == 2 ? endMinute : "0" + endMinute) + " am" : ((endHour - 12).toString().length == 2 ? endHour - 12 : (endHour - 12 == 0 ? "12" : "0" + (endHour - 12))) + ":" + (endMinute.length == 2 ? endMinute : "0" + endMinute) + " pm");
		
        // check if all day
		if (startTime == "12:00 am" && endTime == "11:59 pm") {
			allDay = true;
		}
		
		// check no end time for migrated data
	    //if (endTime == "00:00 am") {
		//    noEndTime = true;
	    //}
	
		// set start date
		strDate += startDate;

		// add time if not all day
		if (allDay == false) {
			strDate += ' ' + startTime;
		}

		// if not same day, add end date
		if (startDate != endDate) {
			strDate += ' to ' + endDate;
		}

		// add end time if not all day
		if (allDay == false && noEndTime == false) {
			if (startDate != endDate) {
				strDate += ' ' + endTime;
			} else {
				strDate += ' to  ' + endTime;
			}
		}

		// check title length and add ellipsis if necessary
		if (title.length > 70) {
		    title = title.substring(0, 69) + '...';
		}

        $('body').append('<div id="calendar-event-overlay"><h1>' + title.replace(/&/g, '&amp').replace(/\"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;')  + "</h1><h2> " + strDate + '</h2></span></div>');
        
        $(document).on('click', function() {
            $('#calendar-event-overlay').remove();
        });

        $('#calendar-event-overlay').css({
			'left': ($this.offset().left + -5) + 'px',
            'top': ($this.offset().top + $this.outerHeight()) + 'px'
        }).bind('mouseleave', function() {
            $(this).remove();
        });
	}

    function EditMyEventRegistration(eventDateID, userRegID) {
        //LoadEventRegistrationEdit(userRegID);
        LoadEventDetail(eventDateID, userRegID, true)
    }
    
    function RemoveMyEventRegistration(userRegID,EventDateID) {
        //var data = "{userRegID:" + userRegID + ", EventDateID:" + EventDateID + "}";
        swalert('Are you sure you want to remove this registration?','Remove Registration','critical','yesno',YesRemoveMyEventRegistration,'','',{userRegID:userRegID,EventDateID:EventDateID});
    }
    
    function YesRemoveMyEventRegistration(userData) {
        var data = "{UserRegistrationID: " + userData.userRegID  + ", EventDateID: " + userData.EventDateID + "}";
        var StartDate;
        var EndDate;

        if ($('#myeventslist-txt-startdate').val() == '') {
            StartDate = '1/1/1900';
        } else {
            StartDate = $('#myeventslist-txt-startdate').val();
        }

        if ($('#myeventslist-txt-enddate').val() == '') {
            EndDate = '1/1/1900';
        } else {
            EndDate = $('#myeventslist-txt-enddate').val();
        }       
              
        if (StartDate != '1/1/1900') {
            StartDate += ' 0:00:00';
        }

        if (EndDate != '1/1/1900') {
            EndDate += ' 23:59:59';
        }

        var success = 'GetContent("http://www.springfield.k12.or.us//site/UserControls/Calendar/MyEventsListWrapper.aspx?ModuleInstanceID=175&StartDate=' + StartDate + '&EndDate=' + EndDate + '", "myeventslist-pnl-detail", 2, ""); ShowNotification("Success! You have deleted your registration for this event.");';
        var failure = 'CallControllerFailure(result[0].errormessage);';
        
        CallController("http://www.springfield.k12.or.us//site/UserControls/Calendar/CalendarController.aspx/DeleteRegistration", data, success, failure);
    } 
       
    function LoadEventListView(ModuleInstanceID, Month, Year) {
		$('#calendarview-toggle a').removeClass('active');
		$('#calendarview-toggle a.list').addClass('active');

        $('#calendarlist-pnl-specialview').removeClass('ui-helper-hidden');
        $('#calendar').addClass('ui-helper-hidden');

        Month = $('#calendarlist-month').val();
        Year = $('#calendarlist-year').val();

        GetContent("http://www.springfield.k12.or.us//site/UserControls/Calendar/EventListViewWrapper.aspx?ModuleInstanceID=" + ModuleInstanceID + "&Month=" + Month + "&Year=" + Year, "calendarlist-pnl-specialview", 2, '');
    }

    function ChangeMonth() { 
        var itemid = $('#calendarlist-month').val();
        $('#calendar').find('td.fc-active-day').removeClass('fc-active-day');
        var gotoDate = new Date($('#calendarlist-year').val(), (itemid - 1), 1);
        $('#calendar').fullCalendar('gotoDate', gotoDate);

        if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
            LoadEventListView(175, $('#calendar').fullCalendar('getmonth'), $('#calendar').fullCalendar('getyear'));
        }
        
        if (!$('#calendar-pnl-smcalendar').hasClass('ui-helper-hidden')) {
	        $('#small-calendar-1').datepicker('setDate', new Date($('#calendarlist-year').val(), parseInt($('#calendarlist-month').val()-1)));
        }    
        
        // remove table header for ADA compliance
        // add tabindex for table cells
        fixADA();
    }

    function ChangeYear(itemid) { 
		var itemid = $('#calendarlist-year').val();
        $('#calendar').find('td.fc-active-day').removeClass('fc-active-day');
        var gotoDate = new Date(itemid, ($('#calendarlist-month').val() - 1), 1);
        $('#calendar').fullCalendar('gotoDate', gotoDate);

        if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
            LoadEventListView(175, $('#calendar').fullCalendar('getmonth'), $('#calendar').fullCalendar('getyear'));
        }
        
        if (!$('#calendar-pnl-smcalendar').hasClass('ui-helper-hidden')) {
		    $('#small-calendar-1').datepicker('setDate', new Date($('#calendarlist-year').val(), parseInt($('#calendarlist-month').val()-1)));
        }

        // remove table header for ADA compliance
        // add tabindex for table cells
        fixADA();
    }

    function GoToNext() {
        $('#calendar').find('td.fc-active-day').removeClass('fc-active-day');
        $('#calendar').fullCalendar('next');

        if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
            var month = parseInt($('#calendarlist-month').val()) + 1;
            var year = parseInt($('#calendarlist-year').val());

            if (month > 12) {
                month = 1;
                year = year + 1;
            }

            $('#calendarlist-month').val(month).change();
            ChangeYearDropDown(year);
            $('#calendarlist-year').val(year).change();
            
            if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
                LoadEventListView(175, $('#calendar').fullCalendar('getmonth'), $('#calendar').fullCalendar('getyear'));
            }

            if (!$('#calendar-pnl-smcalendar').hasClass('ui-helper-hidden')) {
				$('#small-calendar-1').datepicker('setDate', new Date($('#calendarlist-year').val(), parseInt($('#calendarlist-month').val())-1));
			}
        }

        // remove table header for ADA compliance
        // add tabindex for table cells
        fixADA();
    }
    
    function GoToPrevious() {
        $('#calendar').find('td.fc-active-day').removeClass('fc-active-day');
        $('#calendar').fullCalendar('prev');

        if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
            var month = $('#calendarlist-month').val() - 1;
            var year = $('#calendarlist-year').val();

            if (month < 1) {
                month = 12;
                year = year - 1;
            }

            $('#calendarlist-month').val(month).change();
            ChangeYearDropDown(year);
            $('#calendarlist-year').val(year).change();
            
            if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
                LoadEventListView(175, $('#calendar').fullCalendar('getmonth'), $('#calendar').fullCalendar('getyear'));
            }

            if (!$('#calendar-pnl-smcalendar').hasClass('ui-helper-hidden')) {
				$('#small-calendar-1').datepicker('setDate', new Date($('#calendarlist-year').val(), parseInt($('#calendarlist-month').val())-1));
			}
        }

        // remove table header for ADA compliance
        // add tabindex for table cells
        fixADA();
    }
    
    function GoToToday() {
        $('#calendar').find('td.fc-active-day').removeClass('fc-active-day');
        $('#calendar').fullCalendar('today');

        if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
            LoadEventListView(175, $('#calendar').fullCalendar('getmonth'), $('#calendar').fullCalendar('getyear'));
        }

        // remove table header for ADA compliance
        // add tabindex for table cells
        fixADA();
    }

    function LoadEventPrint() {
        var view = $('#calendar').fullCalendar('getView');
        view = view.name;

		/*var month = $('#calendar').fullCalendar('getmonth');
		var date = $('#calendar').fullCalendar('getdate');
		var year = $('#calendar').fullCalendar('getyear');*/

        var date = $('#calendar').fullCalendar('getDate');
        var month = $.fullCalendar.formatDate(date, 'M');
        var day = $.fullCalendar.formatDate(date, 'd');
        var year = $.fullCalendar.formatDate(date, 'yyyy');

        month = month - 1;

		if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
			view = "list";
			month = $('#calendarlist-month').val() - 1;
            year = $('#calendarlist-year').val();
		} 
		
		OpenWindow('http://www.springfield.k12.or.us//site/UserControls/Calendar/CalendarPrint.aspx?ModuleInstanceID=175&PageID=2&DomainID=1&Date=' + day + '&Month=' + month + '&Year=' + year + '&View=' + view, 'PrintCalendar', 'width=' + (screen.width - 100) + ',height=' + (screen.height - 100) + ',menubar=yes,scrollbars=yes,top=0,left=0,resizable=yes');
    }
	
    function ToggleEventListDetail() {
        if ($('#eventlist-chk-toggledetail').is(':checked')) {
            $('.ui-eventlistview-detail').removeClass('ui-helper-hidden');
        } else {
            $('.ui-eventlistview-detail').addClass('ui-helper-hidden');
        }
    }

    function LoadEventExportByDateRange() {
        OpenDialogOverlay("WindowMediumModal", { LoadType: "U", LoadURL: "http://www.springfield.k12.or.us//site/UserControls/Calendar/EventExportByDateRangeWrapper.aspx" });
    }

    function EventDetailExportByDateRange() {
        var eventDate = new Date($('#eventexport-txt-startdate').val());
        var endDate = new Date($('#eventexport-txt-enddate').val());
                
        if (endDate < eventDate) {
            swalert('The start date must come before the end date.', 'Attention', 'warning', 'ok');
            return false;
        }

        document.location.href = "http://www.springfield.k12.or.us//site/UserControls/Calendar/EventExport.aspx?ModuleInstanceID=175&StartDate=" + $('#eventexport-txt-startdate').val() + "&EndDate=" + $('#eventexport-txt-enddate').val();
        CloseDialogOverlay('WindowMediumModal');
    }

    function getFullMonth(monthValue) {
        monthValue = parseInt(monthValue);
        var fullMonth = "";

        switch(monthValue) {
            case 1:
                fullMonth = "January";
                break;
            case 2:
                fullMonth = "February";
                break;
            case 3:
                fullMonth = "March";
                break;
            case 4:
                fullMonth = "April";
                break;
            case 5:
                fullMonth = "May";
                break;
            case 6:
                fullMonth = "June";
                break;
            case 7:
                fullMonth = "July";
                break;
            case 8:
                fullMonth = "August";
                break;
            case 9:
                fullMonth = "September";
                break;
            case 10:
                fullMonth = "October";
                break;
            case 11:
                fullMonth = "November";
                break;
            case 12:
                fullMonth = "December";
                break;
        }

        return fullMonth;
    }
    
    function SearchMyEvents() {
        var StartDate;
        var EndDate;

        if ($('#myeventslist-txt-startdate').val() == '') {
            StartDate = '1/1/1900';
        } else {
            StartDate = $('#myeventslist-txt-startdate').val();
        }

        if ($('#myeventslist-txt-enddate').val() == '') {
            EndDate = '1/1/1900';
        } else {
            EndDate = $('#myeventslist-txt-enddate').val();
        }
        
        if ((StartDate != '1/1/1900') && (EndDate != '1/1/1900')) {
            if (new Date(StartDate) > new Date(EndDate)) {
                swalert('The start date must come before the end date.', 'Attention', 'warning', 'ok', '', '', '');
                return false;
            }
        } else if ((EndDate != '1/1/1900') && (StartDate == '1/1/1900')) {
            var CurrentDate = new Date();

            StartDate = (parseInt(CurrentDate.getMonth()) + 1) + "/" + CurrentDate.getDate() + "/" + CurrentDate.getFullYear();

            if (new Date(StartDate) > new Date(EndDate)) {
                swalert('The end date must come after the current date.', 'Attention', 'warning', 'ok', '', '', '');
                return false;
            }
        }
              
        if (StartDate != '1/1/1900') {
            StartDate += ' 0:00:00';
        }

        if (EndDate != '1/1/1900') {
            EndDate += ' 23:59:59';
        }

        GetContent("http://www.springfield.k12.or.us//site/UserControls/Calendar/MyEventsListWrapper.aspx?ModuleInstanceID=175&StartDate=" + StartDate + "&EndDate=" + EndDate, "myeventslist-pnl-detail", 2, '');
    }

    function RefreshCalendarFilter() {
        if ($('#calendar-pnl-calendarfilter-closed').is(':visible')) {
            GetContent("http://www.springfield.k12.or.us//site/UserControls/Calendar/CalendarFilterListWrapper.aspx?ModuleInstanceID=" + "175" + "&Expanded=" + false, "calendar-pnl-calendarfilter-closed", 2);
        } else {
            GetContent("http://www.springfield.k12.or.us//site/UserControls/Calendar/CalendarFilterListWrapper.aspx?ModuleInstanceID=" + "175" + "&Expanded=" + true, "calendar-pnl-calendarfilter-open", 2);             
        }
    }
    
    function ToggleCalendarFilter(expanded) {
        if (expanded === undefined) {
            expanded = $('#calendar-pnl-calendarfilter-closed').is(':visible');
        }

        if (expanded === true) {
            var callback = "$('#calendar-pnl-calendarfilter-closed').fadeOut('fast',function() { $('#calendar-pnl-calendarfilter-open').fadeIn('fast');});";
            GetContent("http://www.springfield.k12.or.us//site/UserControls/Calendar/CalendarFilterListWrapper.aspx?ModuleInstanceID=" + "175" + "&Expanded=" + true, "calendar-pnl-calendarfilter-open", 3, callback);
        } else {
            var callback = "$('#calendar-pnl-calendarfilter-open').fadeOut('fast',function() { $('#calendar-pnl-calendarfilter-closed').fadeIn('fast');});";
            GetContent("http://www.springfield.k12.or.us//site/UserControls/Calendar/CalendarFilterListWrapper.aspx?ModuleInstanceID=" + "175" + "&Expanded=" + false, "calendar-pnl-calendarfilter-closed", 3, callback); 
        }
    }

    function OpenCalendarFilter() {
        OpenDialogOverlay("WindowLargeModal", { LoadType: "U", LoadURL: "http://www.springfield.k12.or.us//site/UserControls/Calendar/CalendarFilterNewWrapper.aspx?DomainID=1&ModuleInstanceID=175" });
    }

    function RefreshCategoryFilter() {
        if ($('#calendar-pnl-categoryfilter-closed').is(':visible')) {
            GetContent("http://www.springfield.k12.or.us//site/UserControls/Calendar/CategoryFilterListWrapper.aspx?ModuleInstanceID=" + "175" + "&Expanded=" + false, "calendar-pnl-categoryfilter-closed", 2);
        } else {
            GetContent("http://www.springfield.k12.or.us//site/UserControls/Calendar/CategoryFilterListWrapper.aspx?ModuleInstanceID=" + "175" + "&Expanded=" + true, "calendar-pnl-categoryfilter-open", 2);             
        }
    }

    function ToggleCategoryFilter(expanded) {
        if (expanded === undefined) {
            expanded = $('#calendar-pnl-categoryfilter-closed').is(':visible');
        }

        if (expanded === true) {
            var callback = "$('#calendar-pnl-categoryfilter-closed').fadeOut('fast',function() { $('#calendar-pnl-categoryfilter-open').fadeIn('fast');});";
            GetContent("http://www.springfield.k12.or.us//site/UserControls/Calendar/CategoryFilterListWrapper.aspx?ModuleInstanceID=" + "175" + "&Expanded=" + true, "calendar-pnl-categoryfilter-open", 3, callback);
        } else {
             var callback = "$('#calendar-pnl-categoryfilter-open').fadeOut('fast',function() { $('#calendar-pnl-categoryfilter-closed').fadeIn('fast');});";
             GetContent("http://www.springfield.k12.or.us//site/UserControls/Calendar/CategoryFilterListWrapper.aspx?ModuleInstanceID=" + "175" + "&Expanded=" + false, "calendar-pnl-categoryfilter-closed", 3, callback); 
         }
     }

    function OpenCategoryFilter() {
        OpenDialogOverlay("WindowLargeModal", { LoadType: "U", LoadURL: "http://www.springfield.k12.or.us//site/UserControls/Calendar/CategoryFilterNewWrapper.aspx?DomainID=1&ModuleInstanceID=175" });
    }

    function RemoveCalendarFilter(ModuleInstanceID) {
        $('#calendarfilter-ul-list li[itemid=' + ModuleInstanceID + ']').remove();

        var strCalendarFilter = GetCookie('CalendarFilter');
        strCalendarFilter = strCalendarFilter.replace(ModuleInstanceID + '-', '');

        SetCookie('CalendarFilter', strCalendarFilter, 365);

        if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
            LoadEventListView(175, $('#calendar').fullCalendar('getmonth'), $('#calendar').fullCalendar('getyear'));
        } else {
            $('#calendar').fullCalendar('refetchEvents');
        }
    }

    function AddCategoryFilter(EventCategoryMasterID) {
        $('#categoryfilter-ul-list li[itemid=' + EventCategoryMasterID + ']').remove();

        var strCategoryFilter = GetCookie('CategoryFilter');
        strCategoryFilter = strCategoryFilter + EventCategoryMasterID + '-';

        SetCookie('CategoryFilter', strCategoryFilter, 365);

        if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
            LoadEventListView(175, $('#calendar').fullCalendar('getmonth'), $('#calendar').fullCalendar('getyear'));
        } else {
            $('#calendar').fullCalendar('refetchEvents');
        }
    }

    function UpdateCalendarFilter(id) {
        var strCalendarFilter = GetCookie('CalendarFilter');

        if ($('#calendarfilter-chk-calendar' + id).is(':checked')) {
            strCalendarFilter = strCalendarFilter + id + '-';
        } else {
            strCalendarFilter = strCalendarFilter.replace(id + '-', '');
        }

        SetCookie('CalendarFilter', strCalendarFilter, 365);
    }  

    function LoadCalendarChannelList() {
        GetContent("http://www.springfield.k12.or.us//site/UserControls/Calendar/CalendarChannelListWrapper.aspx?DomainID=" + $('#calendarfilter-hid-siteid').val(), "calendarfilter-pnl-channellist", 2);
        LoadCalendarSearchList();
    }  

    function SelectFilteredCalendars() {
        var arrValues = GetCookie('CalendarFilter').split('-');
        
        $.each(arrValues, function() {
            $('#calendarfilter-chk-calendar' + this).attr('checked', true);
        });
    }   

    function LoadCalendarSearchList() {
        var DomainID = $('#calendarfilter-hid-channelid').val();

        if (DomainID == 0) {
            DomainID = $('#calendarfilter-hid-siteid').val();
        }

        GetContent("http://www.springfield.k12.or.us//site/UserControls/Calendar/CalendarSearchListWrapper.aspx?DomainID=" + DomainID + "&ModuleInstanceID=" + "175" + "&SearchFor=" + $('#calendarfilternew-txt-search').val(), "calendarfilter-pnl-results", 2, '');
    } 

    function CloseCalendarFilter() {
        CloseDialogOverlay('WindowLargeModal');

        if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
            LoadEventListView(175, $('#calendar').fullCalendar('getmonth'), $('#calendar').fullCalendar('getyear'));
        } else {
            $('#calendar').fullCalendar('refetchEvents');
        }

        RefreshCalendarFilter();
    }

    function CloseCategoryFilter() {
        CloseDialogOverlay('WindowLargeModal');

        if (!$('#calendarlist-pnl-specialview').hasClass('ui-helper-hidden')) {
            LoadEventListView(175, $('#calendar').fullCalendar('getmonth'), $('#calendar').fullCalendar('getyear'));
        } else {
            $('#calendar').fullCalendar('refetchEvents');
        }

        RefreshCategoryFilter();
    }

    function SelectFilteredCategories() {
        var arrValues = GetCookie('CategoryFilter').split('-');

        $.each(arrValues, function() {
            $('#categoryfilter-chk-category' + this).attr('checked', false);
        });
    }

    function UpdateCategoryFilter(id) {
        var strCategoryFilter = GetCookie('CategoryFilter');

        if ($('#categoryfilter-chk-category' + id).is(':checked')) {
            strCategoryFilter = strCategoryFilter.replace(id + '-', '');
        } else {
            strCategoryFilter = strCategoryFilter + id + '-';
        }

        SetCookie('CategoryFilter', strCategoryFilter, 365);
    }

    function toggleFilters() {
        if ($("#calendar-filter-wrapper").hasClass("open")) {
            $("#calendar-filter-wrapper").removeClass("open").addClass("closed");
            SlideUpControl('calendar-filter-wrapper');
            $("#calendar-pnl-filter-toggle-chevron").attr("src", "http://www.springfield.k12.or.us/Static/V2_16_01//GlobalAssets/Images/Icons/16/toggle-closed.png");
        } else {
            $("#calendar-filter-wrapper").removeClass("closed").addClass("open");
            SlideDownControl('calendar-filter-wrapper');
            $("#calendar-pnl-filter-toggle-chevron").attr("src", "http://www.springfield.k12.or.us/Static/V2_16_01//GlobalAssets/Images/Icons/16/toggle-open.png");
        }
    }

    function UpdateCalendarFollow() {
        var data = "{ModuleInstanceID: 175}";
        var success = 'ShowNotification("Success! You are now following this calendar in MyView.");';
        //var failure = 'CallControllerFailure(result[0].errormessage);';
        var failure = 'ShowNotification(result[0].errormessage);';
        
        CallController("http://www.springfield.k12.or.us//site/UserControls/Calendar/CalendarController.aspx/UpdateCalendarFollow", data, success, failure);
    }
', 

', 
', 
    
', 
	
', 
', 

    ', 
        ', Customize Calendar View', 

        ', 
        

        ', 
            ', 
                Calendars ',  ', 
            ', 
            ', 
		    ', 
		        ', Calendar', 
', 
', 
    $(document).ready(function() {
        // ADA click events
        $(".ui-calendarfilter-removefilter").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $(".ui-calendarfilter-addremove").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $(".ui-btn-toolbar").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });
    });
', 
		    ', 
        ', 
        
        ', 
            ', 
                Categories ',  ', 
            ', 
            ', 
            ', 
                ', u"$(document).ready(function() {$('.filter-display li').each(function() {adjustColour($(this));});});",  ', Unassigned',  ', Board Meeting', 
',  ', Budget Meeting', 
',  ', Collaboration Day - Early Release', 
',  ', Conference or Grading Day (No Students)', 
',  ', District Event', 
',  ', First and Last Day of School', 
',  ', Furlough Day - No School', 
',  ', Holiday - No School', 
',  ', No School', 
',  ', School Event', 
',  ', Sport Event', 
',  ', Spring Break', 
',  ', Springfield Education Foundation', 
',  ', Staff Development (No Students)', 
',  ', Winter Break', 
', 


', u"
    $(document).ready(function() {
        
        $('.ui-detail-overlay').detailoverlay();
    });
", 
', 
    $(document).ready(function() {
        // ADA click events
        $(".ui-calendarfilter-addremove").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });

        $(".ui-btn-toolbar").keydown(function(e) {
            e.stopImmediatePropagation();

            if (e.keyCode == 13) {
                $(this).click();
            }
        });
    });
', 
            ', 
        ', 

        ', 
        
        
		
		', 
            ', 
                ', 
                    ', Month Name Placeholder', 
                ', 
                ', 
			        ',  
				        ', 
                            
					        ', 
					        ', Export Events', 
				        ', 
			        ', 
				
                    ', 
                        ',  ',  ', 
                    ', 

                    ', 

                    
                    ', 
                        ',  ', Export', 
                    ', 

                    

			        ', 
                    ', Subscribe to RSS Feed', 
                    ', iCal Feed Instructions', 
                ', 
            ', 
		', 
            
        ', 
            ', 
                ', 
                    ', Today', 
                ', 
           
			    ', 
				    ', 
					    ', 
                            ',  ', Day', 
                        ', 
                        ', 
                            ',  ', Week', 
                        ', 
                        ', 
                            ',  ', Month', 
                        ', 
                        ', 
                            ',  ', List', 
                        ', 
				    ', 
			    ', 
            

                ', 
                    ', \u2039', 
			        ', Change Month', 
                    ', 
				        ', January', 
				        ', February', 
				        ', March', 
				        ', April', 
				        ', May', 
				        ', June', 
				        ', July', 
				        ', August', 
				        ', September', 
				        ', October', 
				        ', November', 
				        ', December', 
			        ', 
			
			        ', Change Year',  
			        ', 
			        ', 
			        ', 

			        ', \u203a', 
                ', 
            ', 

        ', 
    ', 
    
    ', 
        ', Calendar', 
        ', 
        ', 
            ', 
               ', 
            ', 
        ', 
        ', 
            ', 
            ', 
        ', 
        ', 
    ', 
    
    
    
', 
', 

', 
', 
', 
', 
', 
', 
', 
	', 
	', 
		', 
		', 
		', 
			', 
				', 
					', 
				', 
			', 
			', 
				', 
					', 
				', 
			', 
			', 
				', 
					', 
				', 
			', 
			', 
				© ', var currYear = new Date();document.write(currYear.getFullYear());',  Springfield Public Schools
			', 
			', 
				Springfield Public Schools
				', 
				525 Mill Street
				', 
				Springfield, OR 97477
				', 
				Phone: (541) 747-3331
			', 
		', 
	', 
', 
', 
', 
', 
', 
', 
', 
', 
', Questions or Feedback?',  | ', 
', Blackboard Web Community Manager Privacy Policy (Updated)',  | ', 
', Terms of Use', 
', 
', 
', Copyright © 2002-2017 Blackboard, Inc. All rights reserved.', 
', 
', 
', 
', 
', 
', 
', 
', u"
   $(document).ready(function(){
      var beaconURL='http://analytics.schoolwires.com/analytics.asmx/Insert?AccountNumber=%2buDJtb14ukA8GfX06UP%2b0Q%3d%3d&SessionID=d8b93623-c759-48f7-8b39-886de377f6be&SiteID=1&ChannelID=0&SectionID=0&PageID=2&HitDate=1%2f5%2f2017+4%3a27%3a41+AM&Browser=Unknown+0.0&OS=Unknown&IPAddress=117.192.201.51';
      try {
         $.getJSON(beaconURL + '&jsonp=?', function(myData) {});
      } catch(err) { 
         // prevent site error for analytics
      }
   });
", 

    ', 

    
    

    ', 

', u"
    $(document).ready(function() {
        $('#dialog-overlay-WindowMedium-base').appendTo('body');
 		
		
    });
", 
    ', 

', u"
    $(document).ready(function() {
        $('#dialog-overlay-WindowSmall-base').appendTo('body');
 		
		
    });
", 
    ', 

', u"
    $(document).ready(function() {
        $('#dialog-overlay-WindowLarge-base').appendTo('body');
 		
		
    });
", 

    ', 

', u"
    $(document).ready(function() {
        $('#dialog-overlay-WindowMediumModal-base').appendTo('body');
 		
		
    });
", 
    ', 

', u"
    $(document).ready(function() {
        $('#dialog-overlay-WindowSmallModal-base').appendTo('body');
 		
		
    });
", 
    ', 

', u"
    $(document).ready(function() {
        $('#dialog-overlay-WindowLargeModal-base').appendTo('body');
 		
		
    });
", 
    ', 

', u"
    $(document).ready(function() {
        $('#dialog-overlay-WindowXLargeModal-base').appendTo('body');
 		
		
    });
", 

    ', 

', u"
    $(document).ready(function() {
        $('#dialog-overlay-MyAccountSubscriptionOverlay-base').appendTo('body');
 		
		
    });
", 

    ', 

', u"
    $(document).ready(function() {
        $('#dialog-overlay-InsertOverlay-base').appendTo('body');
 		
		
    });
", 
    ', 

', u"
    $(document).ready(function() {
        $('#dialog-overlay-InsertOverlay2-base').appendTo('body');
 		
		
    });
", 
    
    ', 
    #videowrapper {
        position: fixed;
        z-index: 20000;
        background: rgba(0, 0, 0, 0.5) none repeat scroll 0% 0%;
        top: 0px;
        bottom: 0px;
        left: 0px;
        right: 0px;
    }
    #videodialog {
        position: absolute;
        top: 50px;
        left: 50px;
        right: 50px;
        background: #FFF none repeat scroll 0% 0%;
        z-index: 30000;
        box-shadow: 0px 0px 23px rgba(0, 0, 0, 0.65);
        box-sizing: border-box;
        border: 8px solid #FFF;
    }

    #videodialog .close-btn {
        position: absolute;
        top: 0px;
        right: 0px;
        padding: 0px 25px 0px 0px;
        color: #666;
        line-height: 1;
        font-family: "Trebuchet MS","Lucida Grande","Lucida Sans Unicode","Lucida Sans",Tahoma,sans-serif;
        font-size: 14px;
        cursor: pointer;
    }

    #videodialog .close-btn::after {
        content: "X";
        width: 16px;
        height: 16px;
        position: absolute;
        top: 50%;
        right: 0px;
        margin-top: -8px;
        background: #999 none repeat scroll 0% 0%;
        border-radius: 9px;
        color: #FFF;
        font-weight: bold;
        line-height: 16px;
        font-size: 9px;
        text-align: center;
    }
        #videodialog-video {
            margin-top:25px;
        }
    ', 
    ', 
        function resizeVideoIframe() {
            $("#videodialog-video iframe").css({ "width": "auto", "height": "auto" });
            var screenWidth = $(window).width();
            var screenHeight = $(window).height();
            //alert('screen width =' + screenWidth + '  screen height=' + screenHeight);
            var initVidW = 800, initVidH = 600;
            var vidRatio = initVidH / initVidW;
            var vidWidth = $("#videodialog-video").width();
            //alert('videoWidth = ' +vidWidth);
            var vidHeight = vidWidth * vidRatio;

            if ((vidHeight + 100) > screenHeight) {
                vidHeight = screenHeight - 140;
            }

            $("#videodialog-video").css({ "height": (vidHeight) });
            $("#videodialog-video iframe").css({ "width": vidWidth, "height": vidHeight }); 
        }

        function resizeVideo() {
            $("#videodialog-video video").css({ "width": "auto", "height": "auto" });
            var screenWidth = $(window).width();
            var screenHeight = $(window).height();
            //alert('screen width =' + screenWidth + '  screen height=' + screenHeight);
            var initVidW = 800, initVidH = 600;
            var vidRatio = initVidH / initVidW;
            var vidWidth = $("#videodialog-video").width();
            //alert('videoWidth = ' +vidWidth);
            var vidHeight = vidWidth * vidRatio;

            if ((vidHeight + 100) > screenHeight) {
                vidHeight = screenHeight - 140;
            }

            $("#videodialog-video").css({ "height": (vidHeight) });
            $("#videodialog-video video").css({ "width": vidWidth, "height": vidHeight });
            //$(".videoControl").css({ "bottom": $("#videodialog-video video").bottom() + 5, "width": 100 });
        }

        function closeVideoDialog() {
            $('#videowrapper').addClass('ui-helper-hidden');
            $('#videodialog-video').html('');
            $(window).resize(function () { });
        }
    ', 
    ', 
        ', 
            ', CLOSE', 
            ', 
        ', 
    ', 
    ', 

        $(document).ready(function () {

            removeBrokenImages();
            checkSidebar();
            RemoveCookie();

            $('.navigation li.collapsible').each(function () {
                if ($(this).find('ul').length == 0) {
                    $(this).removeClass('collapsible');
                }
            });

            // find page nav state cookie and add open chevron
            var arrValues = GetCookie('SWPageNavState').split('~');

            $.each(arrValues, function () {
                if (this != '') {
                    $('#' + this).addClass('collapsible').prepend("<div class='bullet collapsible' />");
                }
            });

            // find remaining sub menus and add closed chevron and close menu
            $('.navigation li > ul').each(function () {
                var list = $(this);

                if (list.parent().hasClass('active') && !list.parent().hasClass('collapsible')) {
                    // open sub for currently selected page                    
                    list.parent().addClass('collapsible').prepend("<div class='bullet collapsible' />");
                } else {
                    if (list.parent().hasClass('collapsible') && !list.siblings('div').hasClass('collapsible')) {
                        // open sub for page with auto expand
                        list.siblings('div.expandable').remove();
                        list.parent().prepend("<div class='bullet collapsible' />");
                    }
                }

                if (!list.siblings('div').hasClass('collapsible')) {
                    // keep all closed that aren't already set to open
                    list.parent().addClass('expandable').prepend("<div class='bullet expandable' />");
                    ClosePageSubMenu(list.parent());
                } else {
                    OpenPageSubMenu(list.parent());
                }
            });

            // remove bullet from hierarchy if no-bullet set
            $('.navigation li.collapsible').each(function () {
                if ($(this).hasClass('no-bullet')) {
                    if (!$(this).hasClass('navigationgroup')) { $(this).removeClass('collapsible'); }
                    $(this).children('div.collapsible').remove();
                }
            });

            $('.navigation li.expandable').each(function () {
                if ($(this).hasClass('no-bullet')) {
                    if (!$(this).hasClass('navigationgroup')) { $(this).removeClass('expandable'); }
                    $(this).children('div.expandable').remove();
                }
            });

            $('.navigation li:not(.collapsible,.expandable,.no-bullet)').each(function () {
                $(this).prepend("<div class='bullet' />");
            });

            $('.navigation li.active').parents('ul').each(function () {
                if (!$(this).hasClass('page-navigation')) {
                    OpenPageSubMenu($(this).parent());
                }
            });

            // set click event for chevron
            $(document).on('click', '.navigation div.collapsible', function () {
                ClosePageSubMenu($(this).parent());
            });

            $(document).on('click', '.navigation div.expandable', function () {
                OpenPageSubMenu($(this).parent());
            });

            // set navigation grouping links
            $(document).on('click', '.navigationgroup.collapsible > a', function () {
                ClosePageSubMenu($(this).parent());
            });

            $(document).on('click', '.navigationgroup.expandable > a', function () {
                OpenPageSubMenu($(this).parent());
            });

            //SW MYSTART DROPDOWNS
            $(document).on('click', '.sw-mystart-dropdown', function () {
                $(this).children(".sw-dropdown").css("display", "block");
            });

            $(".sw-mystart-dropdown").hover(function () { }, function () {
                $(this).children(".sw-dropdown").hide();
                $(this).blur();
            });

            //SW ACCOUNT DROPDOWN
            $(document).on('click', '#sw-mystart-account', function () {
                $(this).children("#sw-myaccount-list").show();
                $(this).addClass("clicked-state");
            });

            $("#sw-mystart-account, #sw-myaccount-list").hover(function () { }, function () {
                $(this).children("#sw-myaccount-list").hide();
                $(this).removeClass("clicked-state");
                $("#sw-myaccount").blur();
            });

            // set hover class for page and section navigation
            $('.ui-widget.app.pagenavigation, .ui-widget.app.sectionnavigation').find('li > a').hover(function () {
                $(this).addClass('hover');
            }, function () {
                $(this).removeClass('hover');
            });

            // set active class on channel and section
            var activeChannelNavType = $('input#hidActiveChannelNavType').val();
            if (activeChannelNavType == -1) {
                // homepage is active
                $('#navc-HP').addClass('active');
            } else if (activeChannelNavType == 1) {
                // calendar page is active
                $('#navc-CA').addClass('active');
            } else {
                // channel is active
                var activeSelectorID = $('input#hidActiveChannel').val();
                $('#navc-' + activeSelectorID).addClass('active');
                activeSelectorID = $('input#hidActiveSection').val();
                $('#navs-' + activeSelectorID).addClass('active');
            }
        }); // end document ready

        function OpenPageSubMenu(li) {
            if (li.prop('tagName').toLowerCase() == "li") {
                if (li.hasClass('expandable')) {
                    li.removeClass('expandable').addClass('collapsible');
                }
                if (li.find('div:first').hasClass('expandable')) {
                    li.find('div:first').removeClass('expandable').addClass('collapsible');
                }
                li.find('ul:first').show();

                PageNavigationStateCookie();
            }
        }

        function ClosePageSubMenu(li) {
            if (li.prop('tagName').toLowerCase() == "li") {
                li.removeClass('collapsible').addClass('expandable');
                li.find('div:first').removeClass('collapsible').addClass('expandable');
                li.find('ul:first').hide();

                PageNavigationStateCookie();
            }
        }

        function PageNavigationStateCookie() {
            var strCookie = "";

            $('.pagenavigation li > ul').each(function () {
                var item = $(this).parent('li');
                if (item.hasClass('collapsible') && !item.hasClass('no-bullet')) {
                    strCookie += $(this).parent().attr('id') + '~';
                }
            });

            SetCookie('SWPageNavState', strCookie);
        }

        function checkSidebar() {
            $(".ui-widget-sidebar").each(function () {
                if ($.trim($(this).html()) != "") {
                    $(this).show();
                    $(this).siblings(".ui-widget-detail").addClass("with-sidebar");
                }
            });
        }

        function removeBrokenImages() {
            //REMOVES ANY BROKEN IMAGES
            $("span.img img").each(function () {
                if ($(this).attr("src") !== undefined) {
                    $(this).parent().parent().show();
                    $(this).parent().parent().siblings().addClass("has-thumb");
                }
            });
        }

        function LoadEventDetailUE(moduleInstanceID, eventDateID, userRegID, isEdit) {
            (userRegID === undefined ? userRegID = 0 : '');
            (isEdit === undefined ? isEdit = false : '');
            OpenDialogOverlay("WindowMediumModal", { LoadType: "U", LoadURL: "http://www.springfield.k12.or.us//site/UserControls/Calendar/EventDetailWrapper.aspx?ModuleInstanceID=" + moduleInstanceID + "&EventDateID=" + eventDateID + "&UserRegID=" + userRegID + "&IsEdit=" + isEdit });
        }

        function RemoveCookie() {
            // There are no sub page            
            if ($('.pagenavigation li li').length == 0) {
                //return false;
                PageNavigationStateCookie();
            }
        }
    ', 

    ', 

        function AddOffCanvasMenuHeightForSiteNav() {
            var sitenavulHeight = 0;

            if ($('#sw-pg-sitenav-ul').length > 0) {
                sitenavulHeight = parseInt($("#sw-pg-sitenav-ul").height());
            }

            var swinnerwrapHeight = 0;

            if ($('#sw-inner-wrap').length > 0) {
                swinnerwrapHeight = parseInt($("#sw-inner-wrap").height());
            }

            // 360px is abount 5 li height
            if (sitenavulHeight + 360 >= swinnerwrapHeight) {
                $("#sw-inner-wrap").height(sitenavulHeight + 360);
            }
        }

        function AddOffCanvasMenuHeightForSelectSchool() {
            var selectschoolulHeight = 0;

            if ($('#sw-pg-selectschool-ul').length > 0) {
                selectschoolulHeight = parseInt($("#sw-pg-selectschool-ul").height());
            }

            var swinnerwrapHeight = 0;

            if ($('#sw-inner-wrap').length > 0) {
                swinnerwrapHeight = parseInt($("#sw-inner-wrap").height());
            }

            // 360px is abount 5 li height
            if (selectschoolulHeight + 360 >= swinnerwrapHeight) {
                $("#sw-inner-wrap").height(selectschoolulHeight + 360);
            }
        }

        $(document).ready(function () {
            if ($("#sw-pg-sitenav-a").length > 0) {
                $(document).on('click', '#sw-pg-sitenav-a', function () {
                    if ($("#sw-pg-sitenav-ul").hasClass('sw-pgmenu-closed')) {
                        AddOffCanvasMenuHeightForSiteNav();

                        $("ul.sw-pgmenu-toplevel").removeClass('sw-pgmenu-open').addClass('sw-pgmenu-closed');
                        $("#sw-pg-sitenav-ul").removeClass('sw-pgmenu-closed');
                        $("#sw-pg-sitenav-ul").addClass('sw-pgmenu-open');
                    } else {
                        $("#sw-pg-sitenav-ul").removeClass('sw-pgmenu-open');
                        $("#sw-pg-sitenav-ul").addClass('sw-pgmenu-closed');
                    }
                });

                $(document).on('click', '#sw-pg-selectschool-a', function () {
                    if ($("#sw-pg-selectschool-ul").hasClass('sw-pgmenu-closed')) {
                        AddOffCanvasMenuHeightForSelectSchool();

                        $("ul.sw-pgmenu-toplevel").removeClass('sw-pgmenu-open').addClass('sw-pgmenu-closed');
                        $("#sw-pg-selectschool-ul").removeClass('sw-pgmenu-closed');
                        $("#sw-pg-selectschool-ul").addClass('sw-pgmenu-open');
                    } else {
                        $("#sw-pg-selectschool-ul").removeClass('sw-pgmenu-open');
                        $("#sw-pg-selectschool-ul").addClass('sw-pgmenu-closed');
                    }
                });

                $(document).on('click', '#sw-pg-myaccount-a', function () {
                    if ($("#sw-pg-myaccount-ul").hasClass('sw-pgmenu-closed')) {
                        $("ul.sw-pgmenu-toplevel").removeClass('sw-pgmenu-open').addClass('sw-pgmenu-closed');
                        $("#sw-pg-myaccount-ul").removeClass('sw-pgmenu-closed');
                        $("#sw-pg-myaccount-ul").addClass('sw-pgmenu-open');
                    } else {
                        $("#sw-pg-myaccount-ul").removeClass('sw-pgmenu-open');
                        $("#sw-pg-myaccount-ul").addClass('sw-pgmenu-closed');
                    }
                });

                $(document).on('click', '.pg-list-bullet', function () {
                    $(this).prev().toggle();

                    if ($(this).hasClass('closed')) {
                        AddOffCanvasMenuHeightForSiteNav();

                        $(this).removeClass('closed');
                        $(this).addClass('open');
                    } else {
                        $(this).removeClass('open');
                        $(this).addClass('closed');
                    }
                });

                $(document).on('mouseover', '#sw-pg-selectschool', function () {
                    $("#sw-pg-selectschool-firstli").removeClass('sw-pg-selectschool-firstli-mouseout').addClass('sw-pg-selectschool-firstli-mouseover');
                    $("#sw-pg-selectschool-firstli a").addClass('sw-pg-selectschool-firstli-a-mouseover').removeClass('sw-pg-selectschool-firstli-a-mouseout');
                });

                $(document).on('mouseout', '#sw-pg-selectschool', function () {
                    $("#sw-pg-selectschool-firstli").removeClass('sw-pg-selectschool-firstli-mouseover').addClass('sw-pg-selectschool-firstli-mouseout');
                    $("#sw-pg-selectschool-firstli a").addClass('sw-pg-selectschool-firstli-a-mouseout').removeClass('sw-pg-selectschool-firstli-a-mouseover');
                });

                $(document).on('mouseover', '#sw-pg-myaccount', function () {
                    $("#sw-pg-myaccount-firstli").removeClass('sw-pg-myaccount-firstli-mouseout').addClass('sw-pg-myaccount-firstli-mouseover');
                    $("#sw-pg-myaccount-firstli a").addClass('sw-pg-myaccount-firstli-a-mouseover').removeClass('sw-pg-myaccount-firstli-a-mouseout');
                });

                $(document).on('mouseout', '#sw-pg-myaccount', function () {
                    $("#sw-pg-myaccount-firstli").removeClass('sw-pg-myaccount-firstli-mouseover').addClass('sw-pg-myaccount-firstli-mouseout');
                    $("#sw-pg-myaccount-firstli a").addClass('sw-pg-myaccount-firstli-a-mouseout').removeClass('sw-pg-myaccount-firstli-a-mouseover');
                });

                $(document).on('mouseover', '#sw-pg-sitenav', function () {
                    $("#sw-pg-sitenav-firstli").removeClass('sw-pg-sitenav-firstli-mouseout').addClass('sw-pg-sitenav-firstli-mouseover');
                    $("#sw-pg-sitenav-firstli a").addClass('sw-pg-sitenav-firstli-a-mouseover').removeClass('sw-pg-sitenav-firstli-a-mouseout');
                });

                $(document).on('mouseout', '#sw-pg-sitenav', function () {
                    $("#sw-pg-sitenav-firstli").removeClass('sw-pg-sitenav-firstli-mouseover').addClass('sw-pg-sitenav-firstli-mouseout');
                    $("#sw-pg-sitenav-firstli a").addClass('sw-pg-sitenav-firstli-a-mouseout').removeClass('sw-pg-sitenav-firstli-a-mouseover');
                });

                $(document).on('mouseover', '#sw-pg-district', function () {
                    $("#sw-pg-district-firstli").removeClass('sw-pg-district-firstli-mouseout').addClass('sw-pg-district-firstli-mouseover');
                    $("#sw-pg-district-firstli a").addClass('sw-pg-district-firstli-a-mouseover').removeClass('sw-pg-district-firstli-a-mouseout');
                });

                $(document).on('mouseout', '#sw-pg-district', function () {
                    $("#sw-pg-district-firstli").removeClass('sw-pg-district-firstli-mouseover').addClass('sw-pg-district-firstli-mouseout');
                    $("#sw-pg-district-firstli a").addClass('sw-pg-district-firstli-a-mouseout').removeClass('sw-pg-district-firstli-a-mouseover');
                });
            }
        });


    ', 
    
    ', 
    ', 
    ', 
    ', 
    ', 
    ', 

    ', 
  ', 
  ', 
', 


    ', 

    

    ', 
    

']